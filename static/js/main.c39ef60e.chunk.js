(this.webpackJsonpcloud=this.webpackJsonpcloud||[]).push([[0],{113:function(e,t,n){},118:function(e,t,n){},154:function(e,t,n){},155:function(e,t,n){},156:function(e,t,n){},165:function(e,t,n){},166:function(e,t,n){},167:function(e,t,n){},174:function(e,t,n){},175:function(e,t,n){},220:function(e,t,n){},249:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(65),s=n.n(r),l=(n(154),n(104)),i=n(22),o=(n(155),n(156),n(51));n(157),n(132),n(251),n(250);const j={apiKey:"AIzaSyDsEXIV0OTzWuRX4XBiVB4a-3w4bP_fnCs",authDomain:"chocolate-fiesta-cloud.firebaseapp.com",projectId:"chocolate-fiesta-cloud",storageBucket:"chocolate-fiesta-cloud.appspot.com",messagingSenderId:"419100703725",appId:"1:419100703725:web:42a642a456befea15045e4",measurementId:"G-FRZNRK641V"};o.a.initializeApp(j);const d=o.a.auth(),u=o.a.firestore(),b=o.a.storage();o.a.analytics();var h=n(9),O=n(25),x=n.p+"static/media/logo.8bc7b652.png",m=n(2);function p(e){let{setUser:t}=e;const[n,c]=Object(a.useState)(),[r,s]=Object(a.useState)(),[l,i]=Object(a.useState)(null);return Object(m.jsx)("div",{className:"text-center login-wrapper",children:Object(m.jsxs)(h.a,{className:"form-signin",onSubmit:async e=>{e.preventDefault(),await d.signInWithEmailAndPassword(n,r).then((e=>{t(e)})).catch((e=>{i(e.message)}))},children:[Object(m.jsx)("img",{className:"mb-4",src:x,alt:"",width:"120"}),Object(m.jsx)("h1",{className:"h3 mb-3 font-weight-normal",children:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"}),Object(m.jsxs)(h.a.Group,{controlId:"inputEmail",children:[Object(m.jsx)(h.a.Label,{className:"sr-only",children:"Email \u0430\u0434\u0440\u0435\u0441"}),Object(m.jsx)(h.a.Control,{type:"email",placeholder:"Enter email",onChange:e=>c(e.target.value)}),Object(m.jsx)(h.a.Text,{className:"text-danger",children:l})]}),Object(m.jsxs)(h.a.Group,{controlId:"inputPassword",children:[Object(m.jsx)(h.a.Label,{className:"sr-only",children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),Object(m.jsx)(h.a.Control,{type:"password",placeholder:"Password",onChange:e=>s(e.target.value)})]}),Object(m.jsx)(O.a,{className:"btn btn-lg btn-primary btn-block",type:"submit",children:"\u0412\u043e\u0439\u0442\u0438"}),Object(m.jsx)(O.a,{className:"btn btn-lg btn-secondary btn-block",onClick:()=>window.open("https://chocolatefiesta.ru/cloud/","_blank"),children:"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f"})]})})}const f=Object(a.createContext)();var g=n(85),v=n(19),C=n(17);function y(e){let{updatePlot:t,setDrawSettings:n}=e;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(h.a,{children:[Object(m.jsxs)(h.a.Group,{as:v.a,children:[Object(m.jsx)(h.a.Label,{column:!0,children:"\u0420\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u043c\u0435\u0436\u0434\u0443 \u0443\u0437\u043b\u0430\u043c\u0438, \u043c\u043c"}),Object(m.jsx)(C.a,{children:Object(m.jsx)(h.a.Control,{size:"sm",type:"number",step:"0.1",defaultValue:"2.0",onChange:e=>n({delta:e.target.value})})})]}),Object(m.jsxs)(h.a.Group,{as:v.a,children:[Object(m.jsx)(h.a.Label,{column:!0,children:"\u042d\u043a\u0441\u0442\u0440\u0443\u0437\u0438\u044f, \u0435\u0434./\u043c\u043c"}),Object(m.jsx)(C.a,{children:Object(m.jsx)(h.a.Control,{size:"sm",type:"number",step:"0.01",defaultValue:"0.03",onChange:e=>n({e_per_mm:e.target.value})})})]}),Object(m.jsxs)(h.a.Group,{as:v.a,children:[Object(m.jsx)(h.a.Label,{column:!0,children:"Z, \u043c\u043c"}),Object(m.jsx)(C.a,{children:Object(m.jsx)(h.a.Control,{size:"sm",type:"number",step:"0.01",defaultValue:"0.25",onChange:e=>n({z:e.target.value})})})]}),Object(m.jsxs)(h.a.Group,{as:v.a,children:[Object(m.jsx)(h.a.Label,{column:!0,children:"Float"}),Object(m.jsx)(C.a,{children:Object(m.jsx)(h.a.Control,{size:"sm",type:"number",step:"10",defaultValue:"2400",onChange:e=>n({f:e.target.value})})})]}),Object(m.jsxs)(h.a.Group,{as:v.a,children:[Object(m.jsx)(h.a.Label,{column:!0,children:"\u0420\u0430\u0437\u043c\u0435\u0440 \u043f\u0435\u0447\u0430\u0442\u0438, \u043c\u043c"}),Object(m.jsx)(C.a,{children:Object(m.jsx)(h.a.Control,{size:"sm",type:"number",step:"1",defaultValue:"120",onChange:e=>n({print_size_mm:e.target.value})})})]}),Object(m.jsxs)(h.a.Group,{as:v.a,children:[Object(m.jsx)(h.a.Label,{column:!0,children:"\u0420\u0430\u0437\u043c\u0435\u0440 \u0441\u0442\u043e\u043b\u0430, \u043c\u043c"}),Object(m.jsx)(C.a,{children:Object(m.jsx)(h.a.Control,{size:"sm",type:"number",step:"1",defaultValue:"200",onChange:e=>n({table_size_mm:e.target.value})})})]}),Object(m.jsxs)(h.a.Group,{as:v.a,children:[Object(m.jsx)(h.a.Label,{column:!0,children:"\u041e\u0444\u0444\u0441\u0435\u0442 X, \u043c\u043c"}),Object(m.jsx)(C.a,{children:Object(m.jsx)(h.a.Control,{size:"sm",type:"number",step:"1",defaultValue:"0",onChange:e=>n({offset_x:e.target.value})})})]}),Object(m.jsxs)(h.a.Group,{as:v.a,children:[Object(m.jsx)(h.a.Label,{column:!0,children:"\u041e\u0444\u0444\u0441\u0435\u0442 Y, \u043c\u043c"}),Object(m.jsx)(C.a,{children:Object(m.jsx)(h.a.Control,{size:"sm",type:"number",step:"1",defaultValue:"0",onChange:e=>n({offset_y:e.target.value})})})]}),Object(m.jsxs)(h.a.Group,{as:v.a,children:[Object(m.jsx)(h.a.Label,{column:!0,children:"\u042d\u043a\u0441\u0442\u0440\u0443\u0434\u0435\u0440"}),Object(m.jsx)(C.a,{children:Object(m.jsx)(h.a.Control,{size:"sm",type:"number",step:"1",min:"0",max:"1",defaultValue:"0",onChange:e=>n({tool:e.target.value})})})]})]}),Object(m.jsx)(O.a,{onClick:()=>t(),children:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c"})]})}const w="https://cloud-api.chocolatefiesta.ru";var S=n(134),L=n.n(S),k=n(83),N=n(71);function E(e){return Object(a.useEffect)((()=>{}),[e.plotData,e.fetchError]),e.fetchError?Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(N.a,{variant:"danger",children:e.fetchError})}):e.plotData?Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(L.a,{data:e.plotData.data,layout:{showlegend:!1,xaxis:{scaleanchor:"y",scaleratio:1},height:.6*window.innerHeight}})}):Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(k.a,{animation:"border",role:"status",children:Object(m.jsx)("span",{className:"sr-only",children:"Loading..."})})})}var _=n(31);function z(e,t){return{...e,...t}}function F(e){return(e=>b.ref("user").child(e).child("drawing.gcode"))(e).getDownloadURL().catch((function(e){console.log(e)}))}function M(){const{user:e}=Object(a.useContext)(f),t=e.user.uid,[n,c]=Object(a.useState)("#"),[r,s]=Object(a.useState)(null),[l,i]=Object(a.useState)(null),[o,j]=Object(a.useReducer)(z,{});function d(e,t){return i(null),i(null),s(null),fetch(w+"/api/user/"+e+"/drawing/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((e=>{if(console.log(e),201===e.status||200===e.status)return e.json();throw 204===e.status?i('\u0420\u0438\u0441\u0443\u043d\u043e\u043a \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d. \u041f\u0435\u0440\u0435\u0439\u0434\u0438\u0442\u0435 \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443 "\u0420\u0438\u0441\u043e\u0432\u0430\u043d\u0438\u0435" \u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u044c\u0442\u0435 \u0440\u0438\u0441\u0443\u043d\u043e\u043a \u0432 \u043f\u0435\u0447\u0430\u0442\u044c'):i("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0440\u0438\u0441\u0443\u043d\u043a\u0430. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0437\u0436\u0435."),new Error(e)})).then((e=>{s(JSON.parse(e))})).catch((e=>{_.a(new Error(e))}))}return Object(a.useEffect)((()=>{let e=!0;return F(t).then((t=>{e&&c(t)})),d(t,{}),()=>e=!1}),[t]),Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)(g.a,{fluid:"xl",children:[Object(m.jsxs)(v.a,{children:[Object(m.jsx)(C.a,{sm:8,children:Object(m.jsx)(E,{fetchError:l,plotData:r})}),Object(m.jsx)(C.a,{sm:4,children:Object(m.jsx)(y,{updatePlot:function(){d(t,o),F(t).then((e=>c(e)))},setDrawSettings:j})})]}),Object(m.jsx)(v.a,{children:Object(m.jsxs)(C.a,{children:[Object(m.jsx)(O.a,{as:"a",target:"_blank",href:n,className:"control-button",size:"lg",variant:"primary",download:!0,children:"\u0421\u043a\u0430\u0447\u0430\u0442\u044c GCODE"}),Object(m.jsx)(O.a,{as:"a",target:"_blank",href:"/draw",className:"control-button",size:"lg",variant:"secondary",children:"\u0420\u0438\u0441\u043e\u0432\u0430\u043d\u0438\u0435"}),Object(m.jsx)(O.a,{disabled:!0,className:"control-button",variant:"secondary",size:"lg",children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0432 \u043f\u0435\u0447\u0430\u0442\u044c"})]})})]})})}var T=n(258),G=n(36),D=n(259),P=n(255);const V=Object(a.createContext)();n(165);function I(e){let{model:t,...n}=e;const{setCurrentModel:c}=Object(a.useContext)(V);return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)(D.a,{className:"model-card",onClick:()=>c(t),role:"button",children:[Object(m.jsx)(D.a.Img,{className:"model-card-image",variant:"top",src:function(e){let t;return e.some((e=>(t=e.image.src,e.is_thumbnail))),t}(t.images)}),Object(m.jsxs)(D.a.Body,{children:[Object(m.jsx)(D.a.Title,{children:t.name}),Object(m.jsx)(D.a.Text,{children:Object(m.jsx)("span",{dangerouslySetInnerHTML:{__html:t.description}})}),Object(m.jsxs)(P.a,{variant:"secondary",children:[t.print_time," \u043c\u0438\u043d\u0443\u0442"]})," ",Object(m.jsxs)(P.a,{variant:"secondary",children:[t.pieces_num," \u0448\u0442."]})," ",Object(m.jsx)(P.a,{variant:"secondary",children:t.piece_size})," ",Object(m.jsx)(P.a,{variant:"secondary",children:t.colors_num})," "]})]},t.id)})}n(166);function B(){const[e,t]=Object(a.useState)([]),[n,c]=Object(a.useState)([]),[r,s]=Object(a.useState)(""),[l,i]=Object(a.useState)(null),o=async()=>{const e=await u.collection("storage/model-library/public").orderBy("name").get(),n=await u.collection("storage/model-library/tags").orderBy("name").get();e.docs.forEach((e=>{t((t=>[...t,{...e.data(),id:e.id}]))})),n.docs.forEach((e=>{c((t=>[...t,{...e.data(),id:e.id}]))}))};return Object(a.useEffect)((()=>{o()}),[]),Object(m.jsx)("div",{className:"model-list-wrapper",children:Object(m.jsxs)(g.a,{children:[Object(m.jsx)(v.a,{className:"model-tags-row",children:Object(m.jsx)(T.a.Container,{id:"model-tags-tabs",defaultActiveKey:"0",children:Object(m.jsxs)(G.a,{variant:"pills",children:[Object(m.jsx)(G.a.Item,{children:Object(m.jsx)(G.a.Link,{disabled:!0,eventKey:"-1",children:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438"})}),Object(m.jsx)(G.a.Item,{children:Object(m.jsx)(G.a.Link,{eventKey:"0",onClick:e=>i(null),children:"\u0412\u0441\u0435 \u043c\u043e\u0434\u0435\u043b\u0438"})}),n&&n.map(((e,t)=>Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(G.a.Item,{children:Object(m.jsx)(G.a.Link,{eventKey:e.id,onClick:t=>i(e.id),children:e.name})})})))]})})}),Object(m.jsx)(h.a,{children:Object(m.jsx)(h.a.Row,{children:Object(m.jsx)(C.a,{children:Object(m.jsx)(h.a.Control,{type:"text",placeholder:"\u041f\u043e\u0438\u0441\u043a",onChange:e=>s(e.target.value)})})})}),Object(m.jsx)(v.a,{children:e&&(()=>{let t=[...e];return l&&(t=t.filter((e=>{var t;return null===(t=e.tag_ids)||void 0===t?void 0:t.includes(l)}))),t.filter((e=>e.name.toUpperCase().includes(r.toUpperCase())))})().map(((e,t)=>Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(I,{model:e},e.id)})))})]})})}var R=n(257);function U(){const{currentModel:e,cleanCurrentModel:t}=Object(a.useContext)(V);return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(O.a,{variant:"link",onClick:t,children:"\u27f5 \u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043d\u0430\u0437\u0430\u0434"}),Object(m.jsxs)(v.a,{children:[Object(m.jsx)(C.a,{sm:5,children:Object(m.jsx)(R.a,{children:e.images.map((e=>Object(m.jsx)(R.a.Item,{children:Object(m.jsx)("img",{className:"d-block w-100",src:e.image.src,alt:"First slide"})})))})}),Object(m.jsxs)(C.a,{sm:7,children:[Object(m.jsx)("h2",{children:e.name}),Object(m.jsx)("span",{dangerouslySetInnerHTML:{__html:e.description}}),Object(m.jsxs)("h4",{children:[Object(m.jsxs)(P.a,{variant:"secondary",children:[e.print_time," \u043c\u0438\u043d\u0443\u0442"]})," ",Object(m.jsxs)(P.a,{variant:"secondary",children:[e.pieces_num," \u0448\u0442."]})," ",Object(m.jsx)(P.a,{variant:"secondary",children:e.piece_size})," ",Object(m.jsx)(P.a,{variant:"secondary",children:e.colors_num})," "]}),Object(m.jsx)("h4",{children:"\u0424\u0430\u0439\u043b\u044b"}),Object(m.jsx)("ul",{children:e.files.map((e=>Object(m.jsx)("li",{children:Object(m.jsx)(O.a,{as:"a",target:"_blank",variant:"link",href:e.file.src,download:e.file.title,children:e.name||e.file.title})})))})]})]})]})}n(167);function X(){const{currentModel:e,setCurrentModel:t,cleanCurrentModel:n}=function(){const[e,t]=Object(a.useState)(null);return{currentModel:e,setCurrentModel:t,cleanCurrentModel:()=>{t(null)}}}();return e?Object(m.jsx)("div",{className:"wrapper",children:Object(m.jsx)(V.Provider,{value:{currentModel:e,setCurrentModel:t,cleanCurrentModel:n},children:Object(m.jsx)(g.a,{fluid:"xl",children:Object(m.jsx)(U,{})})})}):Object(m.jsx)("div",{className:"wrapper",children:Object(m.jsx)(V.Provider,{value:{currentModel:e,setCurrentModel:t,cleanCurrentModel:n},children:Object(m.jsxs)(g.a,{fluid:"xl",children:[Object(m.jsx)("h2",{children:"\u0411\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430 \u043c\u043e\u0434\u0435\u043b\u0435\u0439"}),Object(m.jsx)(B,{})]})})})}var Y=n(41),J=n(144),W=n(73);const H=Object(J.a)({wrapper:{padding:[15]}});function K(){const e=H(),{user:t,removeUser:n}=Object(a.useContext)(f);return Object(m.jsx)("div",{className:e.wrapper,children:Object(m.jsxs)(Y.a,{className:"justify-content-between",expand:"lg",children:[Object(m.jsx)(W.LinkContainer,{to:"/",children:Object(m.jsx)(Y.a.Brand,{children:"Chocolate Fiesta Cloud \u03b2"})}),Object(m.jsx)(Y.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(m.jsxs)(Y.a.Collapse,{id:"basic-navbar-nav",children:[Object(m.jsxs)(G.a,{className:"mr-auto",children:[Object(m.jsx)(W.LinkContainer,{to:"/library",children:Object(m.jsx)(G.a.Link,{children:"Models Library"})}),Object(m.jsx)(W.LinkContainer,{to:"/draw-print",children:Object(m.jsx)(G.a.Link,{children:"Drawing Print"})}),Object(m.jsx)(W.LinkContainer,{to:"/stl-generator",children:Object(m.jsx)(G.a.Link,{children:"3D Text Generator"})})]}),Object(m.jsxs)(G.a,{className:"ml-auto",children:[Object(m.jsxs)(G.a.Link,{disabled:!0,children:["You are logged in as ",t.user.email]}),Object(m.jsx)(G.a.Link,{onClick:n,children:"Log out"})]})]})]})})}n(174);function A(){return Object(m.jsx)("div",{className:"dash-wrapper",children:Object(m.jsx)("h2",{children:"\u041f\u0440\u0438\u0432\u0435\u0442, \u044d\u0442\u043e Chocolate Fiesta Cloud"})})}const Z=c.a.createContext(),q=e=>{let{children:t}=e;const[n,c]=Object(a.useState)(!1),[r,s]=Object(a.useState)(!1),l=Object(a.useRef)(null),i=Object(a.useRef)(null),[o,j]=Object(a.useState)([]),[d,u]=Object(a.useState)([]),[b,h]=Object(a.useState)([]),O=e=>{if(console.log(e.type),"mousemove"===e.type||"mousedown"===e.type){const{offsetX:t,offsetY:n}=e;return{offsetX:t,offsetY:n}}if("touchstart"===e.type||"touchmove"===e.type){const t=e.target.getBoundingClientRect();return{offsetX:e.touches[0].pageX-t.left,offsetY:e.touches[0].pageY-t.top}}};return Object(m.jsx)(Z.Provider,{value:{canvasRef:l,contextRef:i,x:o,y:d,stops:b,isPrepared:n,prepareCanvas:()=>{if(n)return;const e=l.current,t=Math.min(window.innerWidth,window.innerHeight-128);e.width=2*t,e.height=2*t,e.style.width="".concat(t,"px"),e.style.height="".concat(t,"px");const a=e.getContext("2d");a.scale(2,2),a.lineCap="round",a.strokeStyle="brown",a.lineWidth=14,i.current=a,c(!0)},startDrawing:e=>{let{nativeEvent:t}=e;const{offsetX:n,offsetY:a}=O(t);i.current.beginPath(),i.current.moveTo(n,a),s(!0)},finishDrawing:()=>{i.current.closePath(),s(!1),h([...b,o.length-1])},clearCanvas:()=>{const e=l.current,t=e.getContext("2d");t.fillStyle="white",t.fillRect(0,0,e.width,e.height),j([]),u([]),h([])},draw:e=>{let{nativeEvent:t}=e;if(!r)return;const{offsetX:n,offsetY:a}=O(t);i.current.lineTo(n,a),i.current.stroke(),j([...o,n]),u([...d,a])}},children:t})},Q=()=>Object(a.useContext)(Z);n(175);function $(){const{canvasRef:e,prepareCanvas:t,startDrawing:n,finishDrawing:c,draw:r}=Q();return Object(a.useEffect)(t,[t]),Object(m.jsx)("canvas",{onMouseDown:n,onMouseUp:c,onMouseMove:r,onTouchStart:n,onTouchEnd:c,onTouchMove:r,ref:e})}n(113);function ee(){const{user:e}=Object(a.useContext)(f),{x:t,y:n,stops:c}=Q(),[r,s]=Object(a.useState)(!1);function l(){return(a=e.user.uid,u.collection("user-drawing").doc(a)).set({x:t,y:n,stops:c});var a}function i(){const[e,n]=Object(a.useState)(!1);Object(a.useEffect)((()=>{e&&l().then((()=>{n(!1),s(!0)}))}),[e]);return Object(m.jsx)(O.a,{disabled:e||r||0===t.length,className:"control-button",size:"lg",variant:"success",onClick:e?null:()=>{n(!0)},children:e?"\u041e\u0442\u043f\u0440\u0430\u0432\u043a\u0430...":r?"\u041e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e":"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0432 \u043f\u0435\u0447\u0430\u0442\u044c"})}return Object(a.useEffect)((()=>{s(!1)}),[t]),Object(m.jsx)(i,{})}function te(){const{x:e,clearCanvas:t}=Q();return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("div",{className:"controls-wrapper",children:Object(m.jsx)(Y.a,{fixed:"bottom",bg:"dark",className:"justify-content-center",children:Object(m.jsxs)(G.a,{children:[Object(m.jsx)(O.a,{onClick:t,disabled:0===e.length,className:"control-button",size:"lg",variant:"light",children:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"}),Object(m.jsx)(ee,{})]})})})})}var ne=n(146);n(220);function ae(){return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("div",{children:Object(m.jsxs)(Y.a,{bg:"dark",variant:"dark",className:"justify-content-center",children:[Object(m.jsx)(Y.a.Brand,{href:"/",children:"Chocolate Fiesta Draw"}),Object(m.jsx)(Y.a.Collapse,{id:"basic-navbar-nav",children:Object(m.jsx)(G.a,{className:"ml-auto",children:Object(m.jsx)(G.a.Link,{href:"/draw-print",children:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043a \u043f\u0435\u0447\u0430\u0442\u0438"})})})]})})})}var ce=function(){return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("div",{className:"draw-app-wrapper",children:Object(m.jsx)(ne.a,{...j,firebase:o.a,children:Object(m.jsxs)(q,{children:[Object(m.jsx)(ae,{}),Object(m.jsx)($,{}),Object(m.jsx)(te,{})]})})})})};function re(e){let{updateSTL:t,setStlSettings:n}=e;const a=[{value:"Pacifico",title:"Pacifico"},{value:"Liberation Sans:style=Bold",title:"Sans Bold"},{value:"Liberation Serif:style=Bold",title:"Serif Bold"}];return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(h.a,{children:[Object(m.jsxs)(h.a.Group,{as:v.a,children:[Object(m.jsx)(h.a.Label,{column:!0,children:"Text"}),Object(m.jsx)(C.a,{children:Object(m.jsx)(h.a.Control,{size:"sm",type:"text",defaultValue:"Chocolate Fiesta",onChange:e=>n({text:e.target.value})})})]}),Object(m.jsxs)(h.a.Group,{as:v.a,children:[Object(m.jsx)(h.a.Label,{column:!0,children:"Heigth, mm"}),Object(m.jsx)(C.a,{children:Object(m.jsx)(h.a.Control,{size:"sm",type:"number",step:"1",defaultValue:"5",onChange:e=>n({depth:e.target.value})})})]}),Object(m.jsxs)(h.a.Group,{as:v.a,children:[Object(m.jsx)(h.a.Label,{column:!0,children:"Width, mm"}),Object(m.jsx)(C.a,{children:Object(m.jsx)(h.a.Control,{size:"sm",type:"number",step:"1",defaultValue:"100",onChange:e=>n({width:e.target.value})})})]}),Object(m.jsxs)(h.a.Group,{as:v.a,children:[Object(m.jsx)(h.a.Label,{column:!0,children:"Heigth of foundation, mm"}),Object(m.jsx)(C.a,{children:Object(m.jsx)(h.a.Control,{size:"sm",type:"number",step:"10",defaultValue:"2",onChange:e=>n({foundation_depth:e.target.value})})})]}),Object(m.jsxs)(h.a.Group,{as:v.a,children:[Object(m.jsx)(h.a.Label,{column:!0,children:"Width of foundation, mm"}),Object(m.jsx)(C.a,{children:Object(m.jsx)(h.a.Control,{size:"sm",type:"number",step:"0.1",defaultValue:"2",onChange:e=>n({foundation_offset:e.target.value})})})]}),Object(m.jsxs)(h.a.Group,{as:v.a,children:[Object(m.jsx)(h.a.Label,{column:!0,children:"Word merger foundation width, mm"}),Object(m.jsx)(C.a,{children:Object(m.jsx)(h.a.Control,{size:"sm",type:"number",step:"1",defaultValue:"7",onChange:e=>n({foundation_joiner_height:e.target.value})})})]}),Object(m.jsxs)(h.a.Group,{as:v.a,children:[Object(m.jsx)(h.a.Label,{column:!0,children:"Letter spacing, mm"}),Object(m.jsx)(C.a,{children:Object(m.jsx)(h.a.Control,{size:"sm",type:"number",defaultValue:"1.0",onChange:e=>n({text_spacing:e.target.value})})})]}),Object(m.jsxs)(h.a.Group,{as:v.a,children:[Object(m.jsx)(h.a.Label,{column:!0,children:"Font"}),Object(m.jsx)(C.a,{children:Object(m.jsx)(h.a.Control,{size:"sm",as:"select",defaultValue:a[0].value,onChange:e=>n({font:e.target.value}),children:a.map((e=>Object(m.jsx)("option",{value:e.value,children:e.title})))})})]})]}),Object(m.jsx)(O.a,{onClick:()=>t(),children:"Generate"})]})}n(118);var se=n(142);function le(e){return Object(a.useEffect)((()=>{}),[e.stlUrl,e.fetchStlError]),e.fetchStlError?Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(N.a,{variant:"danger",children:"\u0412\u043e\u0437\u043d\u0438\u043a\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u0433\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u0438 \u043c\u043e\u0434\u0435\u043b\u0438, \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0441\u043d\u043e\u0432\u0430."})}):""===e.stlUrl?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(N.a,{variant:"primary",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u0433\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u044f \u043c\u043e\u0434\u0435\u043b\u0438. \u041f\u0440\u043e\u0446\u0435\u0441\u0441 \u043c\u043e\u0436\u0435\u0442 \u0437\u0430\u043d\u044f\u0442\u044c \u0434\u043e 1 \u043c\u0438\u043d\u0443\u0442\u044b."}),Object(m.jsx)(k.a,{animation:"border",role:"status",children:Object(m.jsx)("span",{className:"sr-only",children:"Loading..."})})]}):Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(se.ModelViewer,{width:"100%",aspectgRatio:"100%",rotationSpeeds:[0,0,0],initControlPosition:[0,0,.4],backgroundColor:"#ffffff",url:e.stlUrl})})}function ie(e,t){return{...e,...t}}function oe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;return fetch(e,t).then((a=>{if(a.ok)return a.json();if(n>0)return oe(e,t,n-1);throw new Error(a)})).catch((a=>{if(n>0)return oe(e,t,n-1);throw new Error(a)}))}function je(){const{user:e}=Object(a.useContext)(f),t=e.user.uid,[n,c]=Object(a.useState)(""),[r,s]=Object(a.useReducer)(ie,{}),[l,i]=Object(a.useState)(!1);function o(e,t){return c(""),i(!1),oe(w+"/api/stl-generator/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((e=>{e?c(e.url):(i(!0),_.a(new Error(e)))})).catch((e=>{i(!0),_.a(new Error(e))}))}return Object(a.useEffect)((()=>{let e=!0;return o(0,{}).then((t=>{e&&null!=t&&c(t.url)})),()=>e=!1}),[t]),Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)(g.a,{fluid:"xl",className:"stl-generator-wrapper",children:[Object(m.jsxs)(v.a,{children:[Object(m.jsx)(C.a,{sm:7,children:Object(m.jsx)(le,{fetchStlError:l,stlUrl:n})}),Object(m.jsx)(C.a,{sm:5,children:Object(m.jsx)(re,{updateSTL:function(){o(0,r)},setStlSettings:s})})]}),Object(m.jsx)(v.a,{children:Object(m.jsxs)(C.a,{children:[Object(m.jsx)(O.a,{as:"a",target:"_blank",href:n,className:"control-button",size:"lg",variant:"primary",download:!0,children:"Download STL"}),Object(m.jsx)(O.a,{disabled:!0,className:"control-button",size:"lg",variant:"primary",children:"Send to printer"})]})})]})})}var de=function(){const{user:e,setUser:t,removeUser:n}=function(){const[e,t]=Object(a.useState)((()=>{const e=localStorage.getItem("user");return e?JSON.parse(e):null})()),n=e=>{localStorage.setItem("user",JSON.stringify(e)),t(e)};return{setUser:n,user:e,removeUser:()=>{n(null)}}}();return e?Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(f.Provider,{value:{user:e,setUser:t,removeUser:n},children:Object(m.jsx)(l.BrowserRouter,{children:Object(m.jsxs)(i.g,{children:[Object(m.jsx)(i.d,{exact:!0,path:"/draw",children:Object(m.jsx)(ce,{})}),Object(m.jsxs)(i.d,{path:"/",children:[Object(m.jsx)(K,{}),Object(m.jsx)(i.d,{exact:!0,path:"/",children:Object(m.jsx)(M,{})}),Object(m.jsx)(i.d,{path:"/draw-print",children:Object(m.jsx)(M,{})}),Object(m.jsx)(i.d,{path:"/library",children:Object(m.jsx)(X,{})}),Object(m.jsx)(i.d,{path:"/slicer",children:Object(m.jsx)(A,{})}),Object(m.jsx)(i.d,{path:"/stl-generator",children:Object(m.jsx)(je,{})})]})]})})})}):Object(m.jsx)(p,{setUser:t})};var ue=e=>{e&&e instanceof Function&&n.e(3).then(n.bind(null,260)).then((t=>{let{getCLS:n,getFID:a,getFCP:c,getLCP:r,getTTFB:s}=t;n(e),a(e),c(e),r(e),s(e)}))},be=(n(248),n(256)),he=n(145);be.a({dsn:"https://671da45dc307486090d441b0ff074028@o528559.ingest.sentry.io/5646853",integrations:[new he.a.BrowserTracing],tracesSampleRate:1}),s.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(de,{})}),document.getElementById("root")),ue()}},[[249,1,2]]]);
//# sourceMappingURL=main.c39ef60e.chunk.js.map