(this.webpackJsonpcloud=this.webpackJsonpcloud||[]).push([[0],{112:function(e,t,a){},117:function(e,t,a){},153:function(e,t,a){},154:function(e,t,a){},155:function(e,t,a){},164:function(e,t,a){},165:function(e,t,a){},166:function(e,t,a){},170:function(e,t,a){},171:function(e,t,a){},216:function(e,t,a){},245:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),s=a(66),r=a.n(s),l=(a(153),a(59)),i=a(22),o=(a(154),a(155),a(51));a(156),a(131),a(247),a(246);const j={apiKey:"AIzaSyDsEXIV0OTzWuRX4XBiVB4a-3w4bP_fnCs",authDomain:"chocolate-fiesta-cloud.firebaseapp.com",projectId:"chocolate-fiesta-cloud",storageBucket:"chocolate-fiesta-cloud.appspot.com",messagingSenderId:"419100703725",appId:"1:419100703725:web:42a642a456befea15045e4",measurementId:"G-FRZNRK641V"};o.a.initializeApp(j);const d=o.a.auth(),u=o.a.firestore(),b=o.a.storage(),h=(o.a.analytics(),async e=>{try{const t=Date.now(),a=e.path,n=localStorage.getItem(a),c=n?JSON.parse(n):null,s=c?c.ttl:null;let r=c?c.items:null;if((!s||t>s)&&(r=null),!r){r=[];const n=t+3e5;(await e.orderBy("name").get()).docs.forEach((e=>{r=[...r,{...e.data(),id:e.id}]})),localStorage.setItem(a,JSON.stringify({items:r,ttl:n}))}return r}catch(t){console.log(t)}});var O=a(9),x=a(25),m=a.p+"static/media/logo.8bc7b652.png",p=a(2);function f(e){let{setUser:t}=e;const[a,c]=Object(n.useState)(),[s,r]=Object(n.useState)(),[l,i]=Object(n.useState)(null);return Object(p.jsx)("div",{className:"text-center login-wrapper",children:Object(p.jsxs)(O.a,{className:"form-signin",onSubmit:async e=>{e.preventDefault(),await d.signInWithEmailAndPassword(a,s).then((e=>{t(e)})).catch((e=>{i(e.message)}))},children:[Object(p.jsx)("img",{className:"mb-4",src:m,alt:"",width:"120"}),Object(p.jsx)("h1",{className:"h3 mb-3 font-weight-normal",children:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"}),Object(p.jsxs)(O.a.Group,{controlId:"inputEmail",children:[Object(p.jsx)(O.a.Label,{className:"sr-only",children:"Email \u0430\u0434\u0440\u0435\u0441"}),Object(p.jsx)(O.a.Control,{type:"email",placeholder:"Enter email",onChange:e=>c(e.target.value)}),Object(p.jsx)(O.a.Text,{className:"text-danger",children:l})]}),Object(p.jsxs)(O.a.Group,{controlId:"inputPassword",children:[Object(p.jsx)(O.a.Label,{className:"sr-only",children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),Object(p.jsx)(O.a.Control,{type:"password",placeholder:"Password",onChange:e=>r(e.target.value)})]}),Object(p.jsx)(x.a,{className:"btn btn-lg btn-primary btn-block",type:"submit",children:"\u0412\u043e\u0439\u0442\u0438"}),Object(p.jsx)(x.a,{className:"btn btn-lg btn-secondary btn-block",onClick:()=>window.open("https://chocolatefiesta.ru/cloud/","_blank"),children:"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f"})]})})}const g=Object(n.createContext)();var v=a(85),C=a(19),y=a(17);function w(e){let{updatePlot:t,setDrawSettings:a}=e;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(O.a,{children:[Object(p.jsxs)(O.a.Group,{as:C.a,children:[Object(p.jsx)(O.a.Label,{column:!0,children:"\u0420\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u043c\u0435\u0436\u0434\u0443 \u0443\u0437\u043b\u0430\u043c\u0438, \u043c\u043c"}),Object(p.jsx)(y.a,{children:Object(p.jsx)(O.a.Control,{size:"sm",type:"number",step:"0.1",defaultValue:"2.0",onChange:e=>a({delta:e.target.value})})})]}),Object(p.jsxs)(O.a.Group,{as:C.a,children:[Object(p.jsx)(O.a.Label,{column:!0,children:"\u042d\u043a\u0441\u0442\u0440\u0443\u0437\u0438\u044f, \u0435\u0434./\u043c\u043c"}),Object(p.jsx)(y.a,{children:Object(p.jsx)(O.a.Control,{size:"sm",type:"number",step:"0.01",defaultValue:"0.03",onChange:e=>a({e_per_mm:e.target.value})})})]}),Object(p.jsxs)(O.a.Group,{as:C.a,children:[Object(p.jsx)(O.a.Label,{column:!0,children:"Z, \u043c\u043c"}),Object(p.jsx)(y.a,{children:Object(p.jsx)(O.a.Control,{size:"sm",type:"number",step:"0.01",defaultValue:"0.25",onChange:e=>a({z:e.target.value})})})]}),Object(p.jsxs)(O.a.Group,{as:C.a,children:[Object(p.jsx)(O.a.Label,{column:!0,children:"Float"}),Object(p.jsx)(y.a,{children:Object(p.jsx)(O.a.Control,{size:"sm",type:"number",step:"10",defaultValue:"2400",onChange:e=>a({f:e.target.value})})})]}),Object(p.jsxs)(O.a.Group,{as:C.a,children:[Object(p.jsx)(O.a.Label,{column:!0,children:"\u0420\u0430\u0437\u043c\u0435\u0440 \u043f\u0435\u0447\u0430\u0442\u0438, \u043c\u043c"}),Object(p.jsx)(y.a,{children:Object(p.jsx)(O.a.Control,{size:"sm",type:"number",step:"1",defaultValue:"120",onChange:e=>a({print_size_mm:e.target.value})})})]}),Object(p.jsxs)(O.a.Group,{as:C.a,children:[Object(p.jsx)(O.a.Label,{column:!0,children:"\u0420\u0430\u0437\u043c\u0435\u0440 \u0441\u0442\u043e\u043b\u0430, \u043c\u043c"}),Object(p.jsx)(y.a,{children:Object(p.jsx)(O.a.Control,{size:"sm",type:"number",step:"1",defaultValue:"200",onChange:e=>a({table_size_mm:e.target.value})})})]}),Object(p.jsxs)(O.a.Group,{as:C.a,children:[Object(p.jsx)(O.a.Label,{column:!0,children:"\u041e\u0444\u0444\u0441\u0435\u0442 X, \u043c\u043c"}),Object(p.jsx)(y.a,{children:Object(p.jsx)(O.a.Control,{size:"sm",type:"number",step:"1",defaultValue:"0",onChange:e=>a({offset_x:e.target.value})})})]}),Object(p.jsxs)(O.a.Group,{as:C.a,children:[Object(p.jsx)(O.a.Label,{column:!0,children:"\u041e\u0444\u0444\u0441\u0435\u0442 Y, \u043c\u043c"}),Object(p.jsx)(y.a,{children:Object(p.jsx)(O.a.Control,{size:"sm",type:"number",step:"1",defaultValue:"0",onChange:e=>a({offset_y:e.target.value})})})]}),Object(p.jsxs)(O.a.Group,{as:C.a,children:[Object(p.jsx)(O.a.Label,{column:!0,children:"\u042d\u043a\u0441\u0442\u0440\u0443\u0434\u0435\u0440"}),Object(p.jsx)(y.a,{children:Object(p.jsx)(O.a.Control,{size:"sm",type:"number",step:"1",min:"0",max:"1",defaultValue:"0",onChange:e=>a({tool:e.target.value})})})]})]}),Object(p.jsx)(x.a,{onClick:()=>t(),children:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c"})]})}const S="https://cloud-api.chocolatefiesta.ru";var N=a(133),L=a.n(N),k=a(83),_=a(72);function z(e){return Object(n.useEffect)((()=>{}),[e.plotData,e.fetchError]),e.fetchError?Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(_.a,{variant:"danger",children:e.fetchError})}):e.plotData?Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(L.a,{data:e.plotData.data,layout:{showlegend:!1,xaxis:{scaleanchor:"y",scaleratio:1},height:.6*window.innerHeight}})}):Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(k.a,{animation:"border",role:"status",children:Object(p.jsx)("span",{className:"sr-only",children:"Loading..."})})})}var E=a(31);function F(e,t){return{...e,...t}}function M(e){return(e=>b.ref("user").child(e).child("drawing.gcode"))(e).getDownloadURL().catch((function(e){console.log(e)}))}function T(){const{user:e}=Object(n.useContext)(g),t=e.user.uid,[a,c]=Object(n.useState)("#"),[s,r]=Object(n.useState)(null),[l,i]=Object(n.useState)(null),[o,j]=Object(n.useReducer)(F,{});function d(e,t){return i(null),i(null),r(null),fetch(S+"/api/user/"+e+"/drawing/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((e=>{if(console.log(e),201===e.status||200===e.status)return e.json();throw 204===e.status?i('\u0420\u0438\u0441\u0443\u043d\u043e\u043a \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d. \u041f\u0435\u0440\u0435\u0439\u0434\u0438\u0442\u0435 \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443 "\u0420\u0438\u0441\u043e\u0432\u0430\u043d\u0438\u0435" \u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u044c\u0442\u0435 \u0440\u0438\u0441\u0443\u043d\u043e\u043a \u0432 \u043f\u0435\u0447\u0430\u0442\u044c'):i("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0440\u0438\u0441\u0443\u043d\u043a\u0430. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0437\u0436\u0435."),new Error(e)})).then((e=>{r(JSON.parse(e))})).catch((e=>{E.a(new Error(e))}))}return Object(n.useEffect)((()=>{let e=!0;return M(t).then((t=>{e&&c(t)})),d(t,{}),()=>e=!1}),[t]),Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)(v.a,{fluid:"xl",children:[Object(p.jsxs)(C.a,{children:[Object(p.jsx)(y.a,{sm:8,children:Object(p.jsx)(z,{fetchError:l,plotData:s})}),Object(p.jsx)(y.a,{sm:4,children:Object(p.jsx)(w,{updatePlot:function(){d(t,o),M(t).then((e=>c(e)))},setDrawSettings:j})})]}),Object(p.jsx)(C.a,{children:Object(p.jsxs)(y.a,{children:[Object(p.jsx)(x.a,{as:"a",target:"_blank",href:a,className:"control-button",size:"lg",variant:"primary",download:!0,children:"\u0421\u043a\u0430\u0447\u0430\u0442\u044c GCODE"}),Object(p.jsx)(x.a,{as:"a",target:"_blank",href:"/draw",className:"control-button",size:"lg",variant:"secondary",children:"\u0420\u0438\u0441\u043e\u0432\u0430\u043d\u0438\u0435"}),Object(p.jsx)(x.a,{disabled:!0,className:"control-button",variant:"secondary",size:"lg",children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0432 \u043f\u0435\u0447\u0430\u0442\u044c"})]})})]})})}var G=a(254),D=a(42),I=a(255),P=a(251);const V=Object(n.createContext)();a(164);function U(e){let{model:t,...a}=e;const{setCurrentModel:c}=Object(n.useContext)(V);return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)(I.a,{className:"model-card",onClick:()=>c(t),role:"button",children:[Object(p.jsx)(I.a.Img,{className:"model-card-image",variant:"top",src:function(e){let t;return e.some((e=>(t=e.image.src,e.is_thumbnail))),t}(t.images)}),Object(p.jsxs)(I.a.Body,{children:[Object(p.jsx)(I.a.Title,{children:t.name}),Object(p.jsx)(I.a.Text,{children:Object(p.jsx)("span",{dangerouslySetInnerHTML:{__html:t.description}})}),Object(p.jsxs)(P.a,{variant:"secondary",children:[t.print_time," \u043c\u0438\u043d\u0443\u0442"]})," ",Object(p.jsxs)(P.a,{variant:"secondary",children:[t.pieces_num," \u0448\u0442."]})," ",Object(p.jsx)(P.a,{variant:"secondary",children:t.piece_size})," ",Object(p.jsx)(P.a,{variant:"secondary",children:t.colors_num})," "]})]},t.id)})}a(165);function R(){const[e,t]=Object(n.useState)([]),[a,c]=Object(n.useState)([]),[s,r]=Object(n.useState)(""),[l,i]=Object(n.useState)(null),[o,j]=Object(n.useState)(!1),d=async()=>{j(!0);let e=await h(u.collection("storage/model-library/public"));t((t=>[...e]));let a=await h(u.collection("storage/model-library/tags"));c((e=>[...a])),j(!1)};return Object(n.useEffect)((()=>{d()}),[]),Object(p.jsx)("div",{className:"model-list-wrapper",children:Object(p.jsxs)(v.a,{children:[o&&Object(p.jsx)(C.a,{children:Object(p.jsx)(k.a,{animation:"border",role:"status",children:Object(p.jsx)("span",{className:"visually-hidden"})})}),Object(p.jsx)(C.a,{className:"model-tags-row",children:Object(p.jsx)(G.a.Container,{id:"model-tags-tabs",defaultActiveKey:"0",children:Object(p.jsxs)(D.a,{variant:"pills",children:[Object(p.jsx)(D.a.Item,{children:Object(p.jsx)(D.a.Link,{disabled:!0,eventKey:"-1",children:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438"})}),Object(p.jsx)(D.a.Item,{children:Object(p.jsx)(D.a.Link,{eventKey:"0",onClick:e=>i(null),children:"\u0412\u0441\u0435 \u043c\u043e\u0434\u0435\u043b\u0438"})}),a&&a.map(((e,t)=>Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(D.a.Item,{children:Object(p.jsx)(D.a.Link,{eventKey:e.id,onClick:t=>i(e.id),children:e.name})})})))]})})}),Object(p.jsx)(O.a,{children:Object(p.jsx)(O.a.Row,{children:Object(p.jsx)(y.a,{children:Object(p.jsx)(O.a.Control,{type:"text",placeholder:"\u041f\u043e\u0438\u0441\u043a",onChange:e=>r(e.target.value)})})})}),Object(p.jsx)(C.a,{children:e&&(()=>{let t=[...e];return l&&(t=t.filter((e=>{var t;return null===(t=e.tag_ids)||void 0===t?void 0:t.includes(l)}))),t.filter((e=>e.name.toUpperCase().includes(s.toUpperCase())))})().map(((e,t)=>Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(U,{model:e},e.id)})))})]})})}var B=a(253);function X(){const{currentModel:e,cleanCurrentModel:t}=Object(n.useContext)(V);return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(x.a,{variant:"link",onClick:t,children:"\u27f5 \u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043d\u0430\u0437\u0430\u0434"}),Object(p.jsxs)(C.a,{children:[Object(p.jsx)(y.a,{sm:5,children:Object(p.jsx)(B.a,{children:e.images.map((e=>Object(p.jsx)(B.a.Item,{children:Object(p.jsx)("img",{className:"d-block w-100",src:e.image.src,alt:"First slide"})})))})}),Object(p.jsxs)(y.a,{sm:7,children:[Object(p.jsx)("h2",{children:e.name}),Object(p.jsx)("span",{dangerouslySetInnerHTML:{__html:e.description}}),Object(p.jsxs)("h4",{children:[Object(p.jsxs)(P.a,{variant:"secondary",children:[e.print_time," \u043c\u0438\u043d\u0443\u0442"]})," ",Object(p.jsxs)(P.a,{variant:"secondary",children:[e.pieces_num," \u0448\u0442."]})," ",Object(p.jsx)(P.a,{variant:"secondary",children:e.piece_size})," ",Object(p.jsx)(P.a,{variant:"secondary",children:e.colors_num})," "]}),Object(p.jsx)("h4",{children:"\u0424\u0430\u0439\u043b\u044b"}),Object(p.jsx)("ul",{children:e.files.map((e=>Object(p.jsx)("li",{children:Object(p.jsx)(x.a,{as:"a",target:"_blank",variant:"link",href:e.file.src,download:e.file.title,children:e.name||e.file.title})})))})]})]})]})}a(166);function J(){const{currentModel:e,setCurrentModel:t,cleanCurrentModel:a}=function(){const[e,t]=Object(n.useState)(null);return{currentModel:e,setCurrentModel:t,cleanCurrentModel:()=>{t(null)}}}();return e?Object(p.jsx)("div",{className:"wrapper",children:Object(p.jsx)(V.Provider,{value:{currentModel:e,setCurrentModel:t,cleanCurrentModel:a},children:Object(p.jsx)(v.a,{fluid:"xl",children:Object(p.jsx)(X,{})})})}):Object(p.jsx)("div",{className:"wrapper",children:Object(p.jsx)(V.Provider,{value:{currentModel:e,setCurrentModel:t,cleanCurrentModel:a},children:Object(p.jsxs)(v.a,{fluid:"xl",children:[Object(p.jsx)("h2",{children:"\u0411\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430 \u043c\u043e\u0434\u0435\u043b\u0435\u0439"}),Object(p.jsx)(R,{})]})})})}var Y=a(40),W=a(143);const H=Object(W.a)({wrapper:{padding:[15]}});function K(){const e=H(),{user:t,removeUser:a}=Object(n.useContext)(g);return Object(p.jsx)("div",{className:e.wrapper,children:Object(p.jsxs)(Y.a,{className:"justify-content-between",expand:"lg",children:[Object(p.jsx)(Y.a.Brand,{children:Object(p.jsx)(l.b,{className:"navbar-brand",to:"/",children:"Chocolate Fiesta Cloud \u03b2"})}),Object(p.jsx)(Y.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(p.jsxs)(Y.a.Collapse,{id:"basic-navbar-nav",children:[Object(p.jsxs)(D.a,{className:"mr-auto",children:[Object(p.jsx)(l.b,{className:"nav-link",to:"/library",children:"Models Library"}),Object(p.jsx)(l.b,{className:"nav-link",to:"/draw-print",children:"Drawing Print"}),Object(p.jsx)(l.b,{className:"nav-link",to:"/stl-generator",children:"3D Text Generator"})]}),Object(p.jsxs)(D.a,{className:"ml-auto",children:[Object(p.jsxs)(D.a.Link,{disabled:!0,children:["You are logged in as ",t.user.email]}),Object(p.jsx)(D.a.Link,{onClick:a,children:"Log out"})]})]})]})})}a(170);function A(){return Object(p.jsx)("div",{className:"dash-wrapper",children:Object(p.jsx)("h2",{children:"\u041f\u0440\u0438\u0432\u0435\u0442, \u044d\u0442\u043e Chocolate Fiesta Cloud"})})}const Z=c.a.createContext(),q=e=>{let{children:t}=e;const[a,c]=Object(n.useState)(!1),[s,r]=Object(n.useState)(!1),l=Object(n.useRef)(null),i=Object(n.useRef)(null),[o,j]=Object(n.useState)([]),[d,u]=Object(n.useState)([]),[b,h]=Object(n.useState)([]),O=e=>{if(console.log(e.type),"mousemove"===e.type||"mousedown"===e.type){const{offsetX:t,offsetY:a}=e;return{offsetX:t,offsetY:a}}if("touchstart"===e.type||"touchmove"===e.type){const t=e.target.getBoundingClientRect();return{offsetX:e.touches[0].pageX-t.left,offsetY:e.touches[0].pageY-t.top}}};return Object(p.jsx)(Z.Provider,{value:{canvasRef:l,contextRef:i,x:o,y:d,stops:b,isPrepared:a,prepareCanvas:()=>{if(a)return;const e=l.current,t=Math.min(window.innerWidth,window.innerHeight-128);e.width=2*t,e.height=2*t,e.style.width="".concat(t,"px"),e.style.height="".concat(t,"px");const n=e.getContext("2d");n.scale(2,2),n.lineCap="round",n.strokeStyle="brown",n.lineWidth=14,i.current=n,c(!0)},startDrawing:e=>{let{nativeEvent:t}=e;const{offsetX:a,offsetY:n}=O(t);i.current.beginPath(),i.current.moveTo(a,n),r(!0)},finishDrawing:()=>{i.current.closePath(),r(!1),h([...b,o.length-1])},clearCanvas:()=>{const e=l.current,t=e.getContext("2d");t.fillStyle="white",t.fillRect(0,0,e.width,e.height),j([]),u([]),h([])},draw:e=>{let{nativeEvent:t}=e;if(!s)return;const{offsetX:a,offsetY:n}=O(t);i.current.lineTo(a,n),i.current.stroke(),j([...o,a]),u([...d,n])}},children:t})},Q=()=>Object(n.useContext)(Z);a(171);function $(){const{canvasRef:e,prepareCanvas:t,startDrawing:a,finishDrawing:c,draw:s}=Q();return Object(n.useEffect)(t,[t]),Object(p.jsx)("canvas",{onMouseDown:a,onMouseUp:c,onMouseMove:s,onTouchStart:a,onTouchEnd:c,onTouchMove:s,ref:e})}a(112);function ee(){const{user:e}=Object(n.useContext)(g),{x:t,y:a,stops:c}=Q(),[s,r]=Object(n.useState)(!1);function l(){return(n=e.user.uid,u.collection("user-drawing").doc(n)).set({x:t,y:a,stops:c});var n}function i(){const[e,a]=Object(n.useState)(!1);Object(n.useEffect)((()=>{e&&l().then((()=>{a(!1),r(!0)}))}),[e]);return Object(p.jsx)(x.a,{disabled:e||s||0===t.length,className:"control-button",size:"lg",variant:"success",onClick:e?null:()=>{a(!0)},children:e?"\u041e\u0442\u043f\u0440\u0430\u0432\u043a\u0430...":s?"\u041e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e":"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0432 \u043f\u0435\u0447\u0430\u0442\u044c"})}return Object(n.useEffect)((()=>{r(!1)}),[t]),Object(p.jsx)(i,{})}function te(){const{x:e,clearCanvas:t}=Q();return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)("div",{className:"controls-wrapper",children:Object(p.jsx)(Y.a,{fixed:"bottom",bg:"dark",className:"justify-content-center",children:Object(p.jsxs)(D.a,{children:[Object(p.jsx)(x.a,{onClick:t,disabled:0===e.length,className:"control-button",size:"lg",variant:"light",children:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"}),Object(p.jsx)(ee,{})]})})})})}var ae=a(145);a(216);function ne(){return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)("div",{children:Object(p.jsxs)(Y.a,{bg:"dark",variant:"dark",className:"justify-content-center",children:[Object(p.jsx)(Y.a.Brand,{href:"/",children:"Chocolate Fiesta Draw"}),Object(p.jsx)(Y.a.Collapse,{id:"basic-navbar-nav",children:Object(p.jsx)(D.a,{className:"ml-auto",children:Object(p.jsx)(D.a.Link,{href:"/draw-print",children:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043a \u043f\u0435\u0447\u0430\u0442\u0438"})})})]})})})}var ce=function(){return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)("div",{className:"draw-app-wrapper",children:Object(p.jsx)(ae.a,{...j,firebase:o.a,children:Object(p.jsxs)(q,{children:[Object(p.jsx)(ne,{}),Object(p.jsx)($,{}),Object(p.jsx)(te,{})]})})})})};function se(e){let{updateSTL:t,setStlSettings:a}=e;const n=[{value:"Pacifico",title:"Pacifico"},{value:"Liberation Sans:style=Bold",title:"Sans Bold"},{value:"Liberation Serif:style=Bold",title:"Serif Bold"}];return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(O.a,{children:[Object(p.jsxs)(O.a.Group,{as:C.a,children:[Object(p.jsx)(O.a.Label,{column:!0,children:"Text"}),Object(p.jsx)(y.a,{children:Object(p.jsx)(O.a.Control,{size:"sm",type:"text",defaultValue:"Chocolate Fiesta",onChange:e=>a({text:e.target.value})})})]}),Object(p.jsxs)(O.a.Group,{as:C.a,children:[Object(p.jsx)(O.a.Label,{column:!0,children:"Heigth, mm"}),Object(p.jsx)(y.a,{children:Object(p.jsx)(O.a.Control,{size:"sm",type:"number",step:"1",defaultValue:"5",onChange:e=>a({depth:e.target.value})})})]}),Object(p.jsxs)(O.a.Group,{as:C.a,children:[Object(p.jsx)(O.a.Label,{column:!0,children:"Width, mm"}),Object(p.jsx)(y.a,{children:Object(p.jsx)(O.a.Control,{size:"sm",type:"number",step:"1",defaultValue:"100",onChange:e=>a({width:e.target.value})})})]}),Object(p.jsxs)(O.a.Group,{as:C.a,children:[Object(p.jsx)(O.a.Label,{column:!0,children:"Heigth of foundation, mm"}),Object(p.jsx)(y.a,{children:Object(p.jsx)(O.a.Control,{size:"sm",type:"number",step:"10",defaultValue:"2",onChange:e=>a({foundation_depth:e.target.value})})})]}),Object(p.jsxs)(O.a.Group,{as:C.a,children:[Object(p.jsx)(O.a.Label,{column:!0,children:"Width of foundation, mm"}),Object(p.jsx)(y.a,{children:Object(p.jsx)(O.a.Control,{size:"sm",type:"number",step:"0.1",defaultValue:"2",onChange:e=>a({foundation_offset:e.target.value})})})]}),Object(p.jsxs)(O.a.Group,{as:C.a,children:[Object(p.jsx)(O.a.Label,{column:!0,children:"Word merger foundation width, mm"}),Object(p.jsx)(y.a,{children:Object(p.jsx)(O.a.Control,{size:"sm",type:"number",step:"1",defaultValue:"7",onChange:e=>a({foundation_joiner_height:e.target.value})})})]}),Object(p.jsxs)(O.a.Group,{as:C.a,children:[Object(p.jsx)(O.a.Label,{column:!0,children:"Letter spacing, mm"}),Object(p.jsx)(y.a,{children:Object(p.jsx)(O.a.Control,{size:"sm",type:"number",defaultValue:"1.0",onChange:e=>a({text_spacing:e.target.value})})})]}),Object(p.jsxs)(O.a.Group,{as:C.a,children:[Object(p.jsx)(O.a.Label,{column:!0,children:"Font"}),Object(p.jsx)(y.a,{children:Object(p.jsx)(O.a.Control,{size:"sm",as:"select",defaultValue:n[0].value,onChange:e=>a({font:e.target.value}),children:n.map((e=>Object(p.jsx)("option",{value:e.value,children:e.title})))})})]})]}),Object(p.jsx)(x.a,{onClick:()=>t(),children:"Generate"})]})}a(117);var re=a(141);function le(e){return Object(n.useEffect)((()=>{}),[e.stlUrl,e.fetchStlError]),e.fetchStlError?Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(_.a,{variant:"danger",children:"\u0412\u043e\u0437\u043d\u0438\u043a\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u0433\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u0438 \u043c\u043e\u0434\u0435\u043b\u0438, \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0441\u043d\u043e\u0432\u0430."})}):""===e.stlUrl?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(_.a,{variant:"primary",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u0433\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u044f \u043c\u043e\u0434\u0435\u043b\u0438. \u041f\u0440\u043e\u0446\u0435\u0441\u0441 \u043c\u043e\u0436\u0435\u0442 \u0437\u0430\u043d\u044f\u0442\u044c \u0434\u043e 1 \u043c\u0438\u043d\u0443\u0442\u044b."}),Object(p.jsx)(k.a,{animation:"border",role:"status",children:Object(p.jsx)("span",{className:"sr-only",children:"Loading..."})})]}):Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(re.ModelViewer,{width:"100%",aspectgRatio:"100%",rotationSpeeds:[0,0,0],initControlPosition:[0,0,.4],backgroundColor:"#ffffff",url:e.stlUrl})})}function ie(e,t){return{...e,...t}}function oe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;return fetch(e,t).then((n=>{if(n.ok)return n.json();if(a>0)return oe(e,t,a-1);throw new Error(n)})).catch((n=>{if(a>0)return oe(e,t,a-1);throw new Error(n)}))}function je(){const{user:e}=Object(n.useContext)(g),t=e.user.uid,[a,c]=Object(n.useState)(""),[s,r]=Object(n.useReducer)(ie,{}),[l,i]=Object(n.useState)(!1);function o(e,t){return c(""),i(!1),oe(S+"/api/stl-generator/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((e=>{e?c(e.url):(i(!0),E.a(new Error(e)))})).catch((e=>{i(!0),E.a(new Error(e))}))}return Object(n.useEffect)((()=>{let e=!0;return o(0,{}).then((t=>{e&&null!=t&&c(t.url)})),()=>e=!1}),[t]),Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)(v.a,{fluid:"xl",className:"stl-generator-wrapper",children:[Object(p.jsxs)(C.a,{children:[Object(p.jsx)(y.a,{sm:7,children:Object(p.jsx)(le,{fetchStlError:l,stlUrl:a})}),Object(p.jsx)(y.a,{sm:5,children:Object(p.jsx)(se,{updateSTL:function(){o(0,s)},setStlSettings:r})})]}),Object(p.jsx)(C.a,{children:Object(p.jsxs)(y.a,{children:[Object(p.jsx)(x.a,{as:"a",target:"_blank",href:a,className:"control-button",size:"lg",variant:"primary",download:!0,children:"Download STL"}),Object(p.jsx)(x.a,{disabled:!0,className:"control-button",size:"lg",variant:"primary",children:"Send to printer"})]})})]})})}var de=function(){const{user:e,setUser:t,removeUser:a}=function(){const[e,t]=Object(n.useState)((()=>{const e=localStorage.getItem("user");return e?JSON.parse(e):null})()),a=e=>{localStorage.setItem("user",JSON.stringify(e)),t(e)};return{setUser:a,user:e,removeUser:()=>{a(null)}}}();return e?Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(g.Provider,{value:{user:e,setUser:t,removeUser:a},children:Object(p.jsx)(l.a,{children:Object(p.jsxs)(i.c,{children:[Object(p.jsx)(i.a,{exact:!0,path:"/draw",children:Object(p.jsx)(ce,{})}),Object(p.jsxs)(i.a,{path:"/",children:[Object(p.jsx)(K,{}),Object(p.jsx)(i.a,{exact:!0,path:"/",children:Object(p.jsx)(T,{})}),Object(p.jsx)(i.a,{path:"/draw-print",children:Object(p.jsx)(T,{})}),Object(p.jsx)(i.a,{path:"/library",children:Object(p.jsx)(J,{})}),Object(p.jsx)(i.a,{path:"/slicer",children:Object(p.jsx)(A,{})}),Object(p.jsx)(i.a,{path:"/stl-generator",children:Object(p.jsx)(je,{})})]})]})})})}):Object(p.jsx)(f,{setUser:t})};var ue=e=>{e&&e instanceof Function&&a.e(3).then(a.bind(null,256)).then((t=>{let{getCLS:a,getFID:n,getFCP:c,getLCP:s,getTTFB:r}=t;a(e),n(e),c(e),s(e),r(e)}))},be=(a(244),a(252)),he=a(144);be.a({dsn:"https://671da45dc307486090d441b0ff074028@o528559.ingest.sentry.io/5646853",integrations:[new he.a.BrowserTracing],tracesSampleRate:1}),r.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(de,{})}),document.getElementById("root")),ue()}},[[245,1,2]]]);
//# sourceMappingURL=main.3b228baf.chunk.js.map