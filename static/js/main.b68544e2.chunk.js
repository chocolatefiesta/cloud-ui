(this.webpackJsonpcloud=this.webpackJsonpcloud||[]).push([[0],{114:function(e,t,a){},119:function(e,t,a){},156:function(e,t,a){},157:function(e,t,a){},158:function(e,t,a){},166:function(e,t,a){},167:function(e,t,a){},168:function(e,t,a){},175:function(e,t,a){},176:function(e,t,a){},221:function(e,t,a){},222:function(e,t,a){},251:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a(0),s=a.n(c),r=a(69),l=a.n(r),i=(a(156),a(62)),o=a(23),j=(a(157),a(158),a(54));a(159),a(133),a(253),a(252);const d={apiKey:"AIzaSyDsEXIV0OTzWuRX4XBiVB4a-3w4bP_fnCs",authDomain:"chocolate-fiesta-cloud.firebaseapp.com",projectId:"chocolate-fiesta-cloud",storageBucket:"chocolate-fiesta-cloud.appspot.com",messagingSenderId:"419100703725",appId:"1:419100703725:web:42a642a456befea15045e4",measurementId:"G-FRZNRK641V"};j.a.initializeApp(d);const b=j.a.auth(),u=j.a.firestore(),h=j.a.storage(),O=(j.a.analytics(),async e=>{try{const t=Date.now(),a=e.path,n=localStorage.getItem(a),c=n?JSON.parse(n):null,s=c?c.ttl:null;let r=c?c.items:null;if((!s||t>s)&&(r=null),!r){r=[];const n=t+1e3;(await e.get()).docs.forEach((e=>{r=[...r,{...e.data(),id:e.id}]})),localStorage.setItem(a,JSON.stringify({items:r,ttl:n}))}return r}catch(t){console.log(t)}});var x=a(9),m=a(26),f=a.p+"static/media/logo.8bc7b652.png";function p({setUser:e}){const[t,a]=Object(c.useState)(),[s,r]=Object(c.useState)(),[l,i]=Object(c.useState)(null);return Object(n.jsx)("div",{className:"text-center login-wrapper",children:Object(n.jsxs)(x.a,{className:"form-signin",onSubmit:async a=>{a.preventDefault(),await b.signInWithEmailAndPassword(t,s).then((t=>{e(t)})).catch((e=>{i(e.message)}))},children:[Object(n.jsx)("img",{className:"mb-4",src:f,alt:"",width:"120"}),Object(n.jsx)("h1",{className:"h3 mb-3 font-weight-normal",children:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"}),Object(n.jsxs)(x.a.Group,{controlId:"inputEmail",children:[Object(n.jsx)(x.a.Label,{className:"sr-only",children:"Email \u0430\u0434\u0440\u0435\u0441"}),Object(n.jsx)(x.a.Control,{type:"email",placeholder:"Enter email",onChange:e=>a(e.target.value)}),Object(n.jsx)(x.a.Text,{className:"text-danger",children:l})]}),Object(n.jsxs)(x.a.Group,{controlId:"inputPassword",children:[Object(n.jsx)(x.a.Label,{className:"sr-only",children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),Object(n.jsx)(x.a.Control,{type:"password",placeholder:"Password",onChange:e=>r(e.target.value)})]}),Object(n.jsx)(m.a,{className:"btn btn-lg btn-primary btn-block",type:"submit",children:"\u0412\u043e\u0439\u0442\u0438"}),Object(n.jsx)(m.a,{className:"btn btn-lg btn-secondary btn-block",onClick:()=>window.open("https://chocolatefiesta.ru/cloud/","_blank"),children:"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f"})]})})}const g=Object(c.createContext)();var v=a(87),C=a(21),y=a(18);function w({updatePlot:e,setDrawSettings:t}){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)(x.a,{children:[Object(n.jsxs)(x.a.Group,{as:C.a,children:[Object(n.jsx)(x.a.Label,{column:!0,children:"\u0420\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u043c\u0435\u0436\u0434\u0443 \u0443\u0437\u043b\u0430\u043c\u0438, \u043c\u043c"}),Object(n.jsx)(y.a,{children:Object(n.jsx)(x.a.Control,{size:"sm",type:"number",step:"0.1",defaultValue:"2.0",onChange:e=>t({delta:e.target.value})})})]}),Object(n.jsxs)(x.a.Group,{as:C.a,children:[Object(n.jsx)(x.a.Label,{column:!0,children:"\u042d\u043a\u0441\u0442\u0440\u0443\u0437\u0438\u044f, \u0435\u0434./\u043c\u043c"}),Object(n.jsx)(y.a,{children:Object(n.jsx)(x.a.Control,{size:"sm",type:"number",step:"0.01",defaultValue:"0.03",onChange:e=>t({e_per_mm:e.target.value})})})]}),Object(n.jsxs)(x.a.Group,{as:C.a,children:[Object(n.jsx)(x.a.Label,{column:!0,children:"Z, \u043c\u043c"}),Object(n.jsx)(y.a,{children:Object(n.jsx)(x.a.Control,{size:"sm",type:"number",step:"0.01",defaultValue:"0.25",onChange:e=>t({z:e.target.value})})})]}),Object(n.jsxs)(x.a.Group,{as:C.a,children:[Object(n.jsx)(x.a.Label,{column:!0,children:"Float"}),Object(n.jsx)(y.a,{children:Object(n.jsx)(x.a.Control,{size:"sm",type:"number",step:"10",defaultValue:"2400",onChange:e=>t({f:e.target.value})})})]}),Object(n.jsxs)(x.a.Group,{as:C.a,children:[Object(n.jsx)(x.a.Label,{column:!0,children:"\u0420\u0430\u0437\u043c\u0435\u0440 \u043f\u0435\u0447\u0430\u0442\u0438, \u043c\u043c"}),Object(n.jsx)(y.a,{children:Object(n.jsx)(x.a.Control,{size:"sm",type:"number",step:"1",defaultValue:"120",onChange:e=>t({print_size_mm:e.target.value})})})]}),Object(n.jsxs)(x.a.Group,{as:C.a,children:[Object(n.jsx)(x.a.Label,{column:!0,children:"\u0420\u0430\u0437\u043c\u0435\u0440 \u0441\u0442\u043e\u043b\u0430, \u043c\u043c"}),Object(n.jsx)(y.a,{children:Object(n.jsx)(x.a.Control,{size:"sm",type:"number",step:"1",defaultValue:"200",onChange:e=>t({table_size_mm:e.target.value})})})]}),Object(n.jsxs)(x.a.Group,{as:C.a,children:[Object(n.jsx)(x.a.Label,{column:!0,children:"\u041e\u0444\u0444\u0441\u0435\u0442 X, \u043c\u043c"}),Object(n.jsx)(y.a,{children:Object(n.jsx)(x.a.Control,{size:"sm",type:"number",step:"1",defaultValue:"0",onChange:e=>t({offset_x:e.target.value})})})]}),Object(n.jsxs)(x.a.Group,{as:C.a,children:[Object(n.jsx)(x.a.Label,{column:!0,children:"\u041e\u0444\u0444\u0441\u0435\u0442 Y, \u043c\u043c"}),Object(n.jsx)(y.a,{children:Object(n.jsx)(x.a.Control,{size:"sm",type:"number",step:"1",defaultValue:"0",onChange:e=>t({offset_y:e.target.value})})})]}),Object(n.jsxs)(x.a.Group,{as:C.a,children:[Object(n.jsx)(x.a.Label,{column:!0,children:"\u042d\u043a\u0441\u0442\u0440\u0443\u0434\u0435\u0440"}),Object(n.jsx)(y.a,{children:Object(n.jsx)(x.a.Control,{size:"sm",type:"number",step:"1",min:"0",max:"1",defaultValue:"0",onChange:e=>t({tool:e.target.value})})})]})]}),Object(n.jsx)(m.a,{onClick:()=>e(),children:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c"})]})}const S=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_CLOUD_API_URL;var N=a(135),k=a.n(N),L=a(85),_=a(74);function E(e){return Object(c.useEffect)((()=>{}),[e.plotData,e.fetchError]),e.fetchError?Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(_.a,{variant:"danger",children:e.fetchError})}):e.plotData?Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(k.a,{data:e.plotData.data,layout:{showlegend:!1,xaxis:{scaleanchor:"y",scaleratio:1},height:.6*window.innerHeight}})}):Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(L.a,{animation:"border",role:"status",children:Object(n.jsx)("span",{className:"sr-only",children:"Loading..."})})})}var T=a(32);function F(e,t){return{...e,...t}}function z(e){return(e=>h.ref("user").child(e).child("drawing.gcode"))(e).getDownloadURL().catch((function(e){console.log(e)}))}function P(){const{user:e}=Object(c.useContext)(g),t=e.user.uid,[a,s]=Object(c.useState)("#"),[r,l]=Object(c.useState)(null),[i,o]=Object(c.useState)(null),[j,d]=Object(c.useReducer)(F,{});function b(e,t){return o(null),o(null),l(null),fetch(S+"/api/user/"+e+"/drawing/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((e=>{if(console.log(e),201===e.status||200===e.status)return e.json();throw 204===e.status?o('\u0420\u0438\u0441\u0443\u043d\u043e\u043a \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d. \u041f\u0435\u0440\u0435\u0439\u0434\u0438\u0442\u0435 \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443 "\u0420\u0438\u0441\u043e\u0432\u0430\u043d\u0438\u0435" \u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u044c\u0442\u0435 \u0440\u0438\u0441\u0443\u043d\u043e\u043a \u0432 \u043f\u0435\u0447\u0430\u0442\u044c'):o("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0440\u0438\u0441\u0443\u043d\u043a\u0430. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0437\u0436\u0435."),new Error(e)})).then((e=>{l(JSON.parse(e))})).catch((e=>{T.a(new Error(e))}))}return Object(c.useEffect)((()=>{let e=!0;return z(t).then((t=>{e&&s(t)})),b(t,{}),()=>e=!1}),[t]),Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)(v.a,{fluid:"xl",children:[Object(n.jsxs)(C.a,{children:[Object(n.jsx)(y.a,{sm:8,children:Object(n.jsx)(E,{fetchError:i,plotData:r})}),Object(n.jsx)(y.a,{sm:4,children:Object(n.jsx)(w,{updatePlot:function(){b(t,j),z(t).then((e=>s(e)))},setDrawSettings:d})})]}),Object(n.jsx)(C.a,{children:Object(n.jsxs)(y.a,{children:[Object(n.jsx)(m.a,{as:"a",target:"_blank",href:a,className:"control-button",size:"lg",variant:"primary",download:!0,children:"\u0421\u043a\u0430\u0447\u0430\u0442\u044c GCODE"}),Object(n.jsx)(m.a,{as:"a",target:"_blank",href:"/draw",className:"control-button",size:"lg",variant:"secondary",children:"\u0420\u0438\u0441\u043e\u0432\u0430\u043d\u0438\u0435"}),Object(n.jsx)(m.a,{disabled:!0,className:"control-button",variant:"secondary",size:"lg",children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0432 \u043f\u0435\u0447\u0430\u0442\u044c"})]})})]})})}var D=a(260),V=a(45),I=a(261),M=a(257);const R=Object(c.createContext)();a(166);function G({model:e,...t}){const{setCurrentModel:a}=Object(c.useContext)(R);return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)(I.a,{className:"model-card",onClick:()=>a(e),role:"button",children:[Object(n.jsx)(I.a.Img,{className:"model-card-image",variant:"top",src:function(e){let t;return e.some((e=>(t=e.image.src,e.is_thumbnail))),t}(e.images)}),Object(n.jsxs)(I.a.Body,{children:[Object(n.jsx)(I.a.Title,{children:e.name}),Object(n.jsx)(I.a.Text,{children:Object(n.jsx)("span",{dangerouslySetInnerHTML:{__html:e.description}})}),Object(n.jsxs)(M.a,{variant:"secondary",children:[e.print_time," \u043c\u0438\u043d\u0443\u0442"]})," ",Object(n.jsxs)(M.a,{variant:"secondary",children:[e.pieces_num," \u0448\u0442."]})," ",Object(n.jsx)(M.a,{variant:"secondary",children:e.piece_size})," ",Object(n.jsx)(M.a,{variant:"secondary",children:e.colors_num})," "]})]},e.id)})}a(167);function U(){const[e,t]=Object(c.useState)([]),[a,s]=Object(c.useState)([]),[r,l]=Object(c.useState)(""),[i,o]=Object(c.useState)(null),[j,d]=Object(c.useState)(!1),b=async()=>{d(!0);let e=await O(u.collection("storage/model-library/public").orderBy("name"));t((t=>[...e]));let a=await O(u.collection("storage/model-library/tags").orderBy("name"));s((e=>[...a])),d(!1)};return Object(c.useEffect)((()=>{b()}),[]),Object(n.jsx)("div",{className:"model-list-wrapper",children:Object(n.jsxs)(v.a,{children:[Object(n.jsx)(C.a,{className:"model-tags-row",children:Object(n.jsx)(D.a.Container,{id:"model-tags-tabs",defaultActiveKey:"0",children:Object(n.jsxs)(V.a,{variant:"pills",children:[Object(n.jsx)(V.a.Item,{children:Object(n.jsx)(V.a.Link,{disabled:!0,eventKey:"-1",children:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438"})}),Object(n.jsx)(V.a.Item,{children:Object(n.jsx)(V.a.Link,{eventKey:"0",onClick:e=>o(null),children:"\u0412\u0441\u0435 \u043c\u043e\u0434\u0435\u043b\u0438"})}),a&&a.map(((e,t)=>Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(V.a.Item,{children:Object(n.jsx)(V.a.Link,{eventKey:e.id,onClick:t=>o(e.id),children:e.name})})})))]})})}),Object(n.jsx)(x.a,{children:Object(n.jsx)(x.a.Row,{children:Object(n.jsx)(y.a,{children:Object(n.jsx)(x.a.Control,{type:"text",placeholder:"\u041f\u043e\u0438\u0441\u043a",onChange:e=>l(e.target.value)})})})}),Object(n.jsxs)(C.a,{children:[j&&Object(n.jsx)(C.a,{className:"spiner-wrapper",children:Object(n.jsx)(L.a,{animation:"border",role:"status",children:Object(n.jsx)("span",{className:"visually-hidden"})})}),e&&(()=>{let t=[...e];return i&&(t=t.filter((e=>{var t;return null===(t=e.tag_ids)||void 0===t?void 0:t.includes(i)}))),t.filter((e=>e.name.toUpperCase().includes(r.toUpperCase())))})().map(((e,t)=>Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(G,{model:e},e.id)})))]})]})})}var B=a(259);function A(){const{currentModel:e,cleanCurrentModel:t}=Object(c.useContext)(R);return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(m.a,{variant:"link",onClick:t,children:"\u27f5 \u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043d\u0430\u0437\u0430\u0434"}),Object(n.jsxs)(C.a,{children:[Object(n.jsx)(y.a,{sm:5,children:Object(n.jsx)(B.a,{children:e.images.map((e=>Object(n.jsx)(B.a.Item,{children:Object(n.jsx)("img",{className:"d-block w-100",src:e.image.src,alt:"First slide"})})))})}),Object(n.jsxs)(y.a,{sm:7,children:[Object(n.jsx)("h2",{children:e.name}),Object(n.jsx)("span",{dangerouslySetInnerHTML:{__html:e.description}}),Object(n.jsxs)("h4",{children:[Object(n.jsxs)(M.a,{variant:"secondary",children:[e.print_time," \u043c\u0438\u043d\u0443\u0442"]})," ",Object(n.jsxs)(M.a,{variant:"secondary",children:[e.pieces_num," \u0448\u0442."]})," ",Object(n.jsx)(M.a,{variant:"secondary",children:e.piece_size})," ",Object(n.jsx)(M.a,{variant:"secondary",children:e.colors_num})," "]}),Object(n.jsx)("h4",{children:"\u0424\u0430\u0439\u043b\u044b"}),Object(n.jsx)("ul",{children:e.files.map((e=>Object(n.jsx)("li",{children:Object(n.jsx)(m.a,{as:"a",target:"_blank",variant:"link",href:e.file.src,download:e.file.title,children:e.name||e.file.title})})))})]})]})]})}a(168);function W(){const{currentModel:e,setCurrentModel:t,cleanCurrentModel:a}=function(){const[e,t]=Object(c.useState)(null);return{currentModel:e,setCurrentModel:t,cleanCurrentModel:()=>{t(null)}}}();return e?Object(n.jsx)("div",{className:"wrapper",children:Object(n.jsx)(R.Provider,{value:{currentModel:e,setCurrentModel:t,cleanCurrentModel:a},children:Object(n.jsx)(v.a,{fluid:"xl",children:Object(n.jsx)(A,{})})})}):Object(n.jsx)("div",{className:"wrapper",children:Object(n.jsx)(R.Provider,{value:{currentModel:e,setCurrentModel:t,cleanCurrentModel:a},children:Object(n.jsxs)(v.a,{fluid:"xl",children:[Object(n.jsx)("h2",{children:"\u0411\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430 \u043c\u043e\u0434\u0435\u043b\u0435\u0439"}),Object(n.jsx)(U,{})]})})})}var X=a(42),H=a(145);const J=Object(H.a)({wrapper:{padding:[15]}});function K(){const e=J(),{user:t,removeUser:a}=Object(c.useContext)(g);return Object(n.jsx)("div",{className:e.wrapper,children:Object(n.jsxs)(X.a,{className:"justify-content-between",expand:"lg",children:[Object(n.jsx)(X.a.Brand,{children:Object(n.jsx)(i.b,{className:"navbar-brand",to:"/",children:"Chocolate Fiesta Cloud \u03b2"})}),Object(n.jsx)(X.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(n.jsxs)(X.a.Collapse,{id:"basic-navbar-nav",children:[Object(n.jsxs)(V.a,{className:"mr-auto",children:[Object(n.jsx)(i.b,{className:"nav-link",to:"/library",children:"Models Library"}),Object(n.jsx)(i.b,{className:"nav-link",to:"/draw-print",children:"Drawing Print"}),Object(n.jsx)(i.b,{className:"nav-link",to:"/stl-generator",children:"3D Text Generator"})]}),Object(n.jsxs)(V.a,{className:"ml-auto",children:[Object(n.jsxs)(V.a.Link,{disabled:!0,children:["You are logged in as ",t.user.email]}),Object(n.jsx)(V.a.Link,{onClick:a,children:"Log out"})]})]})]})})}a(175);function Y(){return Object(n.jsx)("div",{className:"dash-wrapper",children:Object(n.jsx)("h2",{children:"\u041f\u0440\u0438\u0432\u0435\u0442, \u044d\u0442\u043e Chocolate Fiesta Cloud"})})}const Z=s.a.createContext(),q=({children:e})=>{const[t,a]=Object(c.useState)(!1),[s,r]=Object(c.useState)(!1),l=Object(c.useRef)(null),i=Object(c.useRef)(null),[o,j]=Object(c.useState)([]),[d,b]=Object(c.useState)([]),[u,h]=Object(c.useState)([]),O=e=>{if(console.log(e.type),"mousemove"===e.type||"mousedown"===e.type){const{offsetX:t,offsetY:a}=e;return{offsetX:t,offsetY:a}}if("touchstart"===e.type||"touchmove"===e.type){const t=e.target.getBoundingClientRect();return{offsetX:e.touches[0].pageX-t.left,offsetY:e.touches[0].pageY-t.top}}};return Object(n.jsx)(Z.Provider,{value:{canvasRef:l,contextRef:i,x:o,y:d,stops:u,isPrepared:t,prepareCanvas:()=>{if(t)return;const e=l.current,n=Math.min(window.innerWidth,window.innerHeight-128);e.width=2*n,e.height=2*n,e.style.width="".concat(n,"px"),e.style.height="".concat(n,"px");const c=e.getContext("2d");c.scale(2,2),c.lineCap="round",c.strokeStyle="brown",c.lineWidth=14,i.current=c,a(!0)},startDrawing:({nativeEvent:e})=>{const{offsetX:t,offsetY:a}=O(e);i.current.beginPath(),i.current.moveTo(t,a),r(!0)},finishDrawing:()=>{i.current.closePath(),r(!1),h([...u,o.length-1])},clearCanvas:()=>{const e=l.current,t=e.getContext("2d");t.fillStyle="white",t.fillRect(0,0,e.width,e.height),j([]),b([]),h([])},draw:({nativeEvent:e})=>{if(!s)return;const{offsetX:t,offsetY:a}=O(e);i.current.lineTo(t,a),i.current.stroke(),j([...o,t]),b([...d,a])}},children:e})},Q=()=>Object(c.useContext)(Z);a(176);function $(){const{canvasRef:e,prepareCanvas:t,startDrawing:a,finishDrawing:s,draw:r}=Q();return Object(c.useEffect)(t,[t]),Object(n.jsx)("canvas",{onMouseDown:a,onMouseUp:s,onMouseMove:r,onTouchStart:a,onTouchEnd:s,onTouchMove:r,ref:e})}a(114);function ee(){const{user:e}=Object(c.useContext)(g),{x:t,y:a,stops:s}=Q(),[r,l]=Object(c.useState)(!1);function i(){return(n=e.user.uid,u.collection("user-drawing").doc(n)).set({x:t,y:a,stops:s});var n}function o(){const[e,a]=Object(c.useState)(!1);Object(c.useEffect)((()=>{e&&i().then((()=>{a(!1),l(!0)}))}),[e]);return Object(n.jsx)(m.a,{disabled:e||r||0===t.length,className:"control-button",size:"lg",variant:"success",onClick:e?null:()=>{a(!0)},children:e?"\u041e\u0442\u043f\u0440\u0430\u0432\u043a\u0430...":r?"\u041e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e":"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0432 \u043f\u0435\u0447\u0430\u0442\u044c"})}return Object(c.useEffect)((()=>{l(!1)}),[t]),Object(n.jsx)(o,{})}function te(){const{x:e,clearCanvas:t}=Q();return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("div",{className:"controls-wrapper",children:Object(n.jsx)(X.a,{fixed:"bottom",bg:"dark",className:"justify-content-center",children:Object(n.jsxs)(V.a,{children:[Object(n.jsx)(m.a,{onClick:t,disabled:0===e.length,className:"control-button",size:"lg",variant:"light",children:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"}),Object(n.jsx)(ee,{})]})})})})}var ae=a(147);a(221);function ne(){return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("div",{children:Object(n.jsxs)(X.a,{bg:"dark",variant:"dark",className:"justify-content-center",children:[Object(n.jsx)(X.a.Brand,{href:"/",children:"Chocolate Fiesta Draw"}),Object(n.jsx)(X.a.Collapse,{id:"basic-navbar-nav",children:Object(n.jsx)(V.a,{className:"ml-auto",children:Object(n.jsx)(V.a.Link,{href:"/draw-print",children:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043a \u043f\u0435\u0447\u0430\u0442\u0438"})})})]})})})}var ce=function(){return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("div",{className:"draw-app-wrapper",children:Object(n.jsx)(ae.a,{...d,firebase:j.a,children:Object(n.jsxs)(q,{children:[Object(n.jsx)(ne,{}),Object(n.jsx)($,{}),Object(n.jsx)(te,{})]})})})})};a(222);function se({updateSTL:e,setStlSettings:t}){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)(x.a,{children:[Object(n.jsxs)(x.a.Group,{as:C.a,children:[Object(n.jsx)(x.a.Label,{column:!0,children:"Text"}),Object(n.jsx)(y.a,{children:Object(n.jsx)(x.a.Control,{size:"sm",type:"text",defaultValue:"Chocolate Fiesta",onChange:e=>t({text:e.target.value})})})]}),Object(n.jsxs)(x.a.Group,{as:C.a,children:[Object(n.jsx)(x.a.Label,{column:!0,children:"Heigth, mm"}),Object(n.jsx)(y.a,{children:Object(n.jsx)(x.a.Control,{size:"sm",type:"number",step:"1",defaultValue:"5",onChange:e=>t({depth:e.target.value})})})]}),Object(n.jsxs)(x.a.Group,{as:C.a,children:[Object(n.jsx)(x.a.Label,{column:!0,children:"Width, mm"}),Object(n.jsx)(y.a,{children:Object(n.jsx)(x.a.Control,{size:"sm",type:"number",step:"1",defaultValue:"100",onChange:e=>t({width:e.target.value})})})]}),Object(n.jsxs)(x.a.Group,{as:C.a,children:[Object(n.jsx)(x.a.Label,{column:!0,children:"Heigth of foundation, mm"}),Object(n.jsx)(y.a,{children:Object(n.jsx)(x.a.Control,{size:"sm",type:"number",step:"10",defaultValue:"2",onChange:e=>t({foundation_depth:e.target.value})})})]}),Object(n.jsxs)(x.a.Group,{as:C.a,children:[Object(n.jsx)(x.a.Label,{column:!0,children:"Width of foundation, mm"}),Object(n.jsx)(y.a,{children:Object(n.jsx)(x.a.Control,{size:"sm",type:"number",step:"0.1",defaultValue:"2",onChange:e=>t({foundation_offset:e.target.value})})})]}),Object(n.jsxs)(x.a.Group,{as:C.a,children:[Object(n.jsx)(x.a.Label,{column:!0,children:"Word merger foundation width, mm"}),Object(n.jsx)(y.a,{children:Object(n.jsx)(x.a.Control,{size:"sm",type:"number",step:"1",defaultValue:"7",onChange:e=>t({foundation_joiner_height:e.target.value})})})]}),Object(n.jsxs)(x.a.Group,{as:C.a,children:[Object(n.jsx)(x.a.Label,{column:!0,children:"Letter spacing, mm"}),Object(n.jsx)(y.a,{children:Object(n.jsx)(x.a.Control,{size:"sm",type:"number",defaultValue:"1.0",onChange:e=>t({text_spacing:e.target.value})})})]}),Object(n.jsxs)(x.a.Group,{as:C.a,children:[Object(n.jsx)(x.a.Label,{column:!0,children:"Font"}),Object(n.jsx)(y.a,{children:Object(n.jsx)("div",{className:"mb-3",children:[{value:"Pacifico",title:"Pacifico",class:"fontPacifico"},{value:"Liberation Sans:style=Bold",title:"Sans Bold",class:"fontPTSans"},{value:"Liberation Serif:style=Bold Italic",title:"Serif Bold",class:"fontPTSerif"},{value:"Raleway:style=Black",title:"Raleway Black",class:"fontRaleway"},{value:"Lobster",title:"Lobster",class:"fontLobster"},{value:"Vollkorn:style=Black",title:"Vollkorn",class:"fontVollkorn"},{value:"Alegreya Sans:style=Black Italic",title:"Alegreya Sans",class:"fontAlegreya"},{value:"Vesterbro",title:"Vesterbro",class:"fontVollkorn"}].map(((e,a)=>Object(n.jsx)(x.a.Check,{defaultChecked:0===a,id:e.value,type:"radio",label:e.title,name:"radio-font",className:e.class,onChange:e=>{console.log("UPDATE STATE"),t({font:e.target.id})}},e.value)))},"defaultradio")})]})]}),Object(n.jsx)(m.a,{onClick:()=>e(),children:"Generate"})]})}a(119);var re=a(143);function le(e){return Object(c.useEffect)((()=>{}),[e.stlUrl,e.fetchStlError]),e.fetchStlError?Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(_.a,{variant:"danger",children:"\u0412\u043e\u0437\u043d\u0438\u043a\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u0433\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u0438 \u043c\u043e\u0434\u0435\u043b\u0438, \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0441\u043d\u043e\u0432\u0430."})}):""===e.stlUrl?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(_.a,{variant:"primary",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u0433\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u044f \u043c\u043e\u0434\u0435\u043b\u0438. \u041f\u0440\u043e\u0446\u0435\u0441\u0441 \u043c\u043e\u0436\u0435\u0442 \u0437\u0430\u043d\u044f\u0442\u044c \u0434\u043e 1 \u043c\u0438\u043d\u0443\u0442\u044b."}),Object(n.jsx)(L.a,{animation:"border",role:"status",children:Object(n.jsx)("span",{className:"sr-only",children:"Loading..."})})]}):Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(re.ModelViewer,{width:"100%",aspectgRatio:"100%",rotationSpeeds:[0,0,0],initControlPosition:[0,0,.4],backgroundColor:"#ffffff",url:e.stlUrl})})}function ie(e,t){return{...e,...t}}function oe(e,t={},a=3){return fetch(e,t).then((n=>{if(n.ok)return n.json();if(a>0)return oe(e,t,a-1);throw new Error(n)})).catch((n=>{if(a>0)return oe(e,t,a-1);throw new Error(n)}))}function je(){const{user:e}=Object(c.useContext)(g),t=e.user.uid,[a,s]=Object(c.useState)(""),[r,l]=Object(c.useReducer)(ie,{}),[i,o]=Object(c.useState)(!1);function j(e,t){return s(""),o(!1),oe(S+"/api/stl-generator/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((e=>{e?s(e.url):(o(!0),T.a(new Error(e)))})).catch((e=>{o(!0),T.a(new Error(e))}))}return Object(c.useEffect)((()=>{let e=!0;return j(0,{}).then((t=>{e&&null!=t&&s(t.url)})),()=>e=!1}),[t]),Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)(v.a,{fluid:"xl",className:"stl-generator-wrapper",children:[Object(n.jsxs)(C.a,{children:[Object(n.jsx)(y.a,{sm:7,children:Object(n.jsx)(le,{fetchStlError:i,stlUrl:a})}),Object(n.jsx)(y.a,{sm:5,children:Object(n.jsx)(se,{updateSTL:function(){j(0,r)},setStlSettings:l})})]}),Object(n.jsx)(C.a,{children:Object(n.jsxs)(y.a,{children:[Object(n.jsx)(m.a,{as:"a",target:"_blank",href:a,className:"control-button",size:"lg",variant:"primary",download:!0,children:"Download STL"}),Object(n.jsx)(m.a,{disabled:!0,className:"control-button",size:"lg",variant:"primary",children:"Send to printer"})]})})]})})}var de=function(){const{user:e,setUser:t,removeUser:a}=function(){const[e,t]=Object(c.useState)((()=>{const e=localStorage.getItem("user");return e?JSON.parse(e):null})()),a=e=>{localStorage.setItem("user",JSON.stringify(e)),t(e)};return{setUser:a,user:e,removeUser:()=>{a(null)}}}();return e?Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(g.Provider,{value:{user:e,setUser:t,removeUser:a},children:Object(n.jsx)(i.a,{children:Object(n.jsxs)(o.c,{children:[Object(n.jsx)(o.a,{exact:!0,path:"/draw",children:Object(n.jsx)(ce,{})}),Object(n.jsxs)(o.a,{path:"/",children:[Object(n.jsx)(K,{}),Object(n.jsx)(o.a,{exact:!0,path:"/",children:Object(n.jsx)(P,{})}),Object(n.jsx)(o.a,{path:"/draw-print",children:Object(n.jsx)(P,{})}),Object(n.jsx)(o.a,{path:"/library",children:Object(n.jsx)(W,{})}),Object(n.jsx)(o.a,{path:"/slicer",children:Object(n.jsx)(Y,{})}),Object(n.jsx)(o.a,{path:"/stl-generator",children:Object(n.jsx)(je,{})})]})]})})})}):Object(n.jsx)(p,{setUser:t})};var be=e=>{e&&e instanceof Function&&a.e(3).then(a.bind(null,262)).then((({getCLS:t,getFID:a,getFCP:n,getLCP:c,getTTFB:s})=>{t(e),a(e),n(e),c(e),s(e)}))},ue=(a(250),a(258)),he=a(146);ue.a({dsn:"https://671da45dc307486090d441b0ff074028@o528559.ingest.sentry.io/5646853",integrations:[new he.a.BrowserTracing],tracesSampleRate:1}),l.a.render(Object(n.jsx)(s.a.StrictMode,{children:Object(n.jsx)(de,{})}),document.getElementById("root")),be()}},[[251,1,2]]]);
//# sourceMappingURL=main.b68544e2.chunk.js.map