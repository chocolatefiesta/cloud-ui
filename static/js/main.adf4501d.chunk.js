(this.webpackJsonpcloud=this.webpackJsonpcloud||[]).push([[0],{111:function(e,t,a){},116:function(e,t,a){},153:function(e,t,a){},154:function(e,t,a){},155:function(e,t,a){},163:function(e,t,a){},164:function(e,t,a){},165:function(e,t,a){},169:function(e,t,a){},170:function(e,t,a){},215:function(e,t,a){},247:function(e,t,a){"use strict";a.r(t);var n=a(2),c=a(0),r=a.n(c),s=a(66),l=a.n(s),i=(a(153),a(143)),o=a(22),j=(a(154),a(155),a(53));a(156),a(130),a(249),a(248);const d={apiKey:"AIzaSyDsEXIV0OTzWuRX4XBiVB4a-3w4bP_fnCs",authDomain:"chocolate-fiesta-cloud.firebaseapp.com",projectId:"chocolate-fiesta-cloud",storageBucket:"chocolate-fiesta-cloud.appspot.com",messagingSenderId:"419100703725",appId:"1:419100703725:web:42a642a456befea15045e4",measurementId:"G-FRZNRK641V"};j.a.initializeApp(d);const u=j.a.auth(),b=j.a.firestore(),h=j.a.storage();j.a.analytics();var O=a(9),x=a(26),m=a.p+"static/media/logo.8bc7b652.png";function f({setUser:e}){const[t,a]=Object(c.useState)(),[r,s]=Object(c.useState)(),[l,i]=Object(c.useState)(null);return Object(n.jsx)("div",{className:"text-center login-wrapper",children:Object(n.jsxs)(O.a,{className:"form-signin",onSubmit:async a=>{a.preventDefault(),await u.signInWithEmailAndPassword(t,r).then((t=>{e(t)})).catch((e=>{i(e.message)}))},children:[Object(n.jsx)("img",{className:"mb-4",src:m,alt:"",width:"120"}),Object(n.jsx)("h1",{className:"h3 mb-3 font-weight-normal",children:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"}),Object(n.jsxs)(O.a.Group,{controlId:"inputEmail",children:[Object(n.jsx)(O.a.Label,{className:"sr-only",children:"Email \u0430\u0434\u0440\u0435\u0441"}),Object(n.jsx)(O.a.Control,{type:"email",placeholder:"Enter email",onChange:e=>a(e.target.value)}),Object(n.jsx)(O.a.Text,{className:"text-danger",children:l})]}),Object(n.jsxs)(O.a.Group,{controlId:"inputPassword",children:[Object(n.jsx)(O.a.Label,{className:"sr-only",children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),Object(n.jsx)(O.a.Control,{type:"password",placeholder:"Password",onChange:e=>s(e.target.value)})]}),Object(n.jsx)(x.a,{className:"btn btn-lg btn-primary btn-block",type:"submit",children:"\u0412\u043e\u0439\u0442\u0438"}),Object(n.jsx)(x.a,{className:"btn btn-lg btn-secondary btn-block",onClick:()=>window.open("https://chocolatefiesta.ru/cloud/","_blank"),children:"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f"})]})})}const p=Object(c.createContext)();var g=a(84),v=a(21),C=a(17);function y({updatePlot:e,setDrawSettings:t}){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)(O.a,{children:[Object(n.jsxs)(O.a.Group,{as:v.a,children:[Object(n.jsx)(O.a.Label,{column:!0,children:"\u0420\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u043c\u0435\u0436\u0434\u0443 \u0443\u0437\u043b\u0430\u043c\u0438, \u043c\u043c"}),Object(n.jsx)(C.a,{children:Object(n.jsx)(O.a.Control,{size:"sm",type:"number",step:"0.1",defaultValue:"2.0",onChange:e=>t({delta:e.target.value})})})]}),Object(n.jsxs)(O.a.Group,{as:v.a,children:[Object(n.jsx)(O.a.Label,{column:!0,children:"\u042d\u043a\u0441\u0442\u0440\u0443\u0437\u0438\u044f, \u0435\u0434./\u043c\u043c"}),Object(n.jsx)(C.a,{children:Object(n.jsx)(O.a.Control,{size:"sm",type:"number",step:"0.01",defaultValue:"0.03",onChange:e=>t({e_per_mm:e.target.value})})})]}),Object(n.jsxs)(O.a.Group,{as:v.a,children:[Object(n.jsx)(O.a.Label,{column:!0,children:"Z, \u043c\u043c"}),Object(n.jsx)(C.a,{children:Object(n.jsx)(O.a.Control,{size:"sm",type:"number",step:"0.01",defaultValue:"0.25",onChange:e=>t({z:e.target.value})})})]}),Object(n.jsxs)(O.a.Group,{as:v.a,children:[Object(n.jsx)(O.a.Label,{column:!0,children:"Float"}),Object(n.jsx)(C.a,{children:Object(n.jsx)(O.a.Control,{size:"sm",type:"number",step:"10",defaultValue:"2400",onChange:e=>t({f:e.target.value})})})]}),Object(n.jsxs)(O.a.Group,{as:v.a,children:[Object(n.jsx)(O.a.Label,{column:!0,children:"\u0420\u0430\u0437\u043c\u0435\u0440 \u043f\u0435\u0447\u0430\u0442\u0438, \u043c\u043c"}),Object(n.jsx)(C.a,{children:Object(n.jsx)(O.a.Control,{size:"sm",type:"number",step:"1",defaultValue:"120",onChange:e=>t({print_size_mm:e.target.value})})})]}),Object(n.jsxs)(O.a.Group,{as:v.a,children:[Object(n.jsx)(O.a.Label,{column:!0,children:"\u0420\u0430\u0437\u043c\u0435\u0440 \u0441\u0442\u043e\u043b\u0430, \u043c\u043c"}),Object(n.jsx)(C.a,{children:Object(n.jsx)(O.a.Control,{size:"sm",type:"number",step:"1",defaultValue:"200",onChange:e=>t({table_size_mm:e.target.value})})})]}),Object(n.jsxs)(O.a.Group,{as:v.a,children:[Object(n.jsx)(O.a.Label,{column:!0,children:"\u041e\u0444\u0444\u0441\u0435\u0442 X, \u043c\u043c"}),Object(n.jsx)(C.a,{children:Object(n.jsx)(O.a.Control,{size:"sm",type:"number",step:"1",defaultValue:"0",onChange:e=>t({offset_x:e.target.value})})})]}),Object(n.jsxs)(O.a.Group,{as:v.a,children:[Object(n.jsx)(O.a.Label,{column:!0,children:"\u041e\u0444\u0444\u0441\u0435\u0442 Y, \u043c\u043c"}),Object(n.jsx)(C.a,{children:Object(n.jsx)(O.a.Control,{size:"sm",type:"number",step:"1",defaultValue:"0",onChange:e=>t({offset_y:e.target.value})})})]}),Object(n.jsxs)(O.a.Group,{as:v.a,children:[Object(n.jsx)(O.a.Label,{column:!0,children:"\u042d\u043a\u0441\u0442\u0440\u0443\u0434\u0435\u0440"}),Object(n.jsx)(C.a,{children:Object(n.jsx)(O.a.Control,{size:"sm",type:"number",step:"1",min:"0",max:"1",defaultValue:"0",onChange:e=>t({tool:e.target.value})})})]})]}),Object(n.jsx)(x.a,{onClick:()=>e(),children:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c"})]})}const w="https://api.chocolatefiesta.ru";var S=a(132),L=a.n(S),N=a(82),k=a(72);function E(e){return Object(c.useEffect)((()=>{}),[e.plotData,e.fetchError]),e.fetchError?Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(k.a,{variant:"danger",children:e.fetchError})}):e.plotData?Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(L.a,{data:e.plotData.data,layout:{showlegend:!1,xaxis:{scaleanchor:"y",scaleratio:1},height:.6*window.innerHeight}})}):Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(N.a,{animation:"border",role:"status",children:Object(n.jsx)("span",{className:"sr-only",children:"Loading..."})})})}var _=a(31);function z(e,t){return{...e,...t}}function F(e){return(e=>h.ref("user").child(e).child("drawing.gcode"))(e).getDownloadURL().catch((function(e){console.log(e)}))}function M(){const{user:e}=Object(c.useContext)(p),t=e.user.uid,[a,r]=Object(c.useState)("#"),[s,l]=Object(c.useState)(null),[i,o]=Object(c.useState)(null),[j,d]=Object(c.useReducer)(z,{});function u(e,t){return o(null),o(null),l(null),fetch(w+"/api/user/"+e+"/drawing/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((e=>{if(console.log(e),201===e.status||200===e.status)return e.json();throw 204===e.status?o('\u0420\u0438\u0441\u0443\u043d\u043e\u043a \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d. \u041f\u0435\u0440\u0435\u0439\u0434\u0438\u0442\u0435 \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443 "\u0420\u0438\u0441\u043e\u0432\u0430\u043d\u0438\u0435" \u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u044c\u0442\u0435 \u0440\u0438\u0441\u0443\u043d\u043e\u043a \u0432 \u043f\u0435\u0447\u0430\u0442\u044c'):o("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0440\u0438\u0441\u0443\u043d\u043a\u0430. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0437\u0436\u0435."),new Error(e)})).then((e=>{l(JSON.parse(e))})).catch((e=>{_.a(new Error(e))}))}return Object(c.useEffect)((()=>{let e=!0;return F(t).then((t=>{e&&r(t)})),u(t,{}),()=>e=!1}),[t]),Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)(g.a,{fluid:"xl",children:[Object(n.jsxs)(v.a,{children:[Object(n.jsx)(C.a,{sm:8,children:Object(n.jsx)(E,{fetchError:i,plotData:s})}),Object(n.jsx)(C.a,{sm:4,children:Object(n.jsx)(y,{updatePlot:function(){u(t,j),F(t).then((e=>r(e)))},setDrawSettings:d})})]}),Object(n.jsx)(v.a,{children:Object(n.jsxs)(C.a,{children:[Object(n.jsx)(x.a,{as:"a",target:"_blank",href:a,className:"control-button",size:"lg",variant:"primary",download:!0,children:"\u0421\u043a\u0430\u0447\u0430\u0442\u044c GCODE"}),Object(n.jsx)(x.a,{as:"a",target:"_blank",href:"/draw",className:"control-button",size:"lg",variant:"secondary",children:"\u0420\u0438\u0441\u043e\u0432\u0430\u043d\u0438\u0435"}),Object(n.jsx)(x.a,{disabled:!0,className:"control-button",variant:"secondary",size:"lg",children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0432 \u043f\u0435\u0447\u0430\u0442\u044c"})]})})]})})}var T=a(258),G=a(38),D=a(259),P=a(255);const V=Object(c.createContext)();a(163);function I({model:e,...t}){const{setCurrentModel:a}=Object(c.useContext)(V);return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)(D.a,{className:"model-card",onClick:()=>a(e),role:"button",children:[Object(n.jsx)(D.a.Img,{className:"model-card-image",variant:"top",src:function(e){let t;return e.some((e=>(t=e.image.src,e.is_thumbnail))),t}(e.images)}),Object(n.jsxs)(D.a.Body,{children:[Object(n.jsx)(D.a.Title,{children:e.name}),Object(n.jsx)(D.a.Text,{children:Object(n.jsx)("span",{dangerouslySetInnerHTML:{__html:e.description}})}),Object(n.jsxs)(P.a,{variant:"secondary",children:[e.print_time," \u043c\u0438\u043d\u0443\u0442"]})," ",Object(n.jsxs)(P.a,{variant:"secondary",children:[e.pieces_num," \u0448\u0442."]})," ",Object(n.jsx)(P.a,{variant:"secondary",children:e.piece_size})," ",Object(n.jsx)(P.a,{variant:"secondary",children:e.colors_num})," "]})]},e.id)})}a(164);function U(){const[e,t]=Object(c.useState)([]),[a,r]=Object(c.useState)([]),[s,l]=Object(c.useState)(""),[i,o]=Object(c.useState)(null),j=async()=>{const e=await b.collection("storage/model-library/public").orderBy("name").get(),a=await b.collection("storage/model-library/tags").orderBy("name").get();e.docs.forEach((e=>{t((t=>[...t,{...e.data(),id:e.id}]))})),a.docs.forEach((e=>{r((t=>[...t,{...e.data(),id:e.id}]))}))};return Object(c.useEffect)((()=>{j()}),[]),Object(n.jsx)("div",{className:"model-list-wrapper",children:Object(n.jsxs)(g.a,{children:[Object(n.jsx)(v.a,{className:"model-tags-row",children:Object(n.jsx)(T.a.Container,{id:"model-tags-tabs",defaultActiveKey:"0",children:Object(n.jsxs)(G.a,{variant:"pills",children:[Object(n.jsx)(G.a.Item,{children:Object(n.jsx)(G.a.Link,{disabled:!0,eventKey:"-1",children:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438"})}),Object(n.jsx)(G.a.Item,{children:Object(n.jsx)(G.a.Link,{eventKey:"0",onClick:e=>o(null),children:"\u0412\u0441\u0435 \u043c\u043e\u0434\u0435\u043b\u0438"})}),a&&a.map(((e,t)=>Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(G.a.Item,{children:Object(n.jsx)(G.a.Link,{eventKey:e.id,onClick:t=>o(e.id),children:e.name})})})))]})})}),Object(n.jsx)(O.a,{children:Object(n.jsx)(O.a.Row,{children:Object(n.jsx)(C.a,{children:Object(n.jsx)(O.a.Control,{type:"text",placeholder:"\u041f\u043e\u0438\u0441\u043a",onChange:e=>l(e.target.value)})})})}),Object(n.jsx)(v.a,{children:e&&(()=>{let t=[...e];return i&&(t=t.filter((e=>{var t;return null===(t=e.tag_ids)||void 0===t?void 0:t.includes(i)}))),t.filter((e=>e.name.toUpperCase().includes(s.toUpperCase())))})().map(((e,t)=>Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(I,{model:e},e.id)})))})]})})}var B=a(257);function R(){const{currentModel:e,cleanCurrentModel:t}=Object(c.useContext)(V);return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(x.a,{variant:"link",onClick:t,children:"\u27f5 \u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043d\u0430\u0437\u0430\u0434"}),Object(n.jsxs)(v.a,{children:[Object(n.jsx)(C.a,{sm:5,children:Object(n.jsx)(B.a,{children:e.images.map((e=>Object(n.jsx)(B.a.Item,{children:Object(n.jsx)("img",{className:"d-block w-100",src:e.image.src,alt:"First slide"})})))})}),Object(n.jsxs)(C.a,{sm:7,children:[Object(n.jsx)("h2",{children:e.name}),Object(n.jsx)("span",{dangerouslySetInnerHTML:{__html:e.description}}),Object(n.jsxs)("h4",{children:[Object(n.jsxs)(P.a,{variant:"secondary",children:[e.print_time," \u043c\u0438\u043d\u0443\u0442"]})," ",Object(n.jsxs)(P.a,{variant:"secondary",children:[e.pieces_num," \u0448\u0442."]})," ",Object(n.jsx)(P.a,{variant:"secondary",children:e.piece_size})," ",Object(n.jsx)(P.a,{variant:"secondary",children:e.colors_num})," "]}),Object(n.jsx)("h4",{children:"\u0424\u0430\u0439\u043b\u044b"}),Object(n.jsx)("ul",{children:e.files.map((e=>Object(n.jsx)("li",{children:Object(n.jsx)(x.a,{as:"a",target:"_blank",variant:"link",href:e.file.src,download:e.file.title,children:e.name||e.file.title})})))})]})]})]})}a(165);function X(){const{currentModel:e,setCurrentModel:t,cleanCurrentModel:a}=function(){const[e,t]=Object(c.useState)(null);return{currentModel:e,setCurrentModel:t,cleanCurrentModel:()=>{t(null)}}}();return e?Object(n.jsx)("div",{className:"wrapper",children:Object(n.jsx)(V.Provider,{value:{currentModel:e,setCurrentModel:t,cleanCurrentModel:a},children:Object(n.jsx)(g.a,{fluid:"xl",children:Object(n.jsx)(R,{})})})}):Object(n.jsx)("div",{className:"wrapper",children:Object(n.jsx)(V.Provider,{value:{currentModel:e,setCurrentModel:t,cleanCurrentModel:a},children:Object(n.jsxs)(g.a,{fluid:"xl",children:[Object(n.jsx)("h2",{children:"\u0411\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430 \u043c\u043e\u0434\u0435\u043b\u0435\u0439"}),Object(n.jsx)(U,{})]})})})}var Y=a(44),J=a(141);const W=Object(J.a)({wrapper:{padding:[15]}});function H(){const e=W(),{user:t,removeUser:a}=Object(c.useContext)(p);return Object(n.jsx)("div",{className:e.wrapper,children:Object(n.jsxs)(Y.a,{className:"justify-content-between",expand:"lg",children:[Object(n.jsx)(Y.a.Brand,{href:"/",children:"Chocolate Fiesta Cloud \u03b2"}),Object(n.jsx)(Y.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(n.jsxs)(Y.a.Collapse,{id:"basic-navbar-nav",children:[Object(n.jsxs)(G.a,{className:"mr-auto",children:[Object(n.jsx)(G.a.Link,{href:"/library",children:"Models Library"}),Object(n.jsx)(G.a.Link,{href:"/draw-print",children:"Drawing Print"}),Object(n.jsx)(G.a.Link,{href:"/stl-generator",children:"3D Text Generator"})]}),Object(n.jsxs)(G.a,{className:"ml-auto",children:[Object(n.jsxs)(G.a.Link,{disabled:!0,children:["You are logged in as ",t.user.email]}),Object(n.jsx)(G.a.Link,{onClick:a,children:"Log out"})]})]})]})})}a(169);function K(){return Object(n.jsx)("div",{className:"dash-wrapper",children:Object(n.jsx)("h2",{children:"\u041f\u0440\u0438\u0432\u0435\u0442, \u044d\u0442\u043e Chocolate Fiesta Cloud"})})}const A=r.a.createContext(),Z=({children:e})=>{const[t,a]=Object(c.useState)(!1),[r,s]=Object(c.useState)(!1),l=Object(c.useRef)(null),i=Object(c.useRef)(null),[o,j]=Object(c.useState)([]),[d,u]=Object(c.useState)([]),[b,h]=Object(c.useState)([]),O=e=>{if(console.log(e.type),"mousemove"===e.type||"mousedown"===e.type){const{offsetX:t,offsetY:a}=e;return{offsetX:t,offsetY:a}}if("touchstart"===e.type||"touchmove"===e.type){const t=e.target.getBoundingClientRect();return{offsetX:e.touches[0].pageX-t.left,offsetY:e.touches[0].pageY-t.top}}};return Object(n.jsx)(A.Provider,{value:{canvasRef:l,contextRef:i,x:o,y:d,stops:b,isPrepared:t,prepareCanvas:()=>{if(t)return;const e=l.current,n=Math.min(window.innerWidth,window.innerHeight-128);e.width=2*n,e.height=2*n,e.style.width="".concat(n,"px"),e.style.height="".concat(n,"px");const c=e.getContext("2d");c.scale(2,2),c.lineCap="round",c.strokeStyle="brown",c.lineWidth=14,i.current=c,a(!0)},startDrawing:({nativeEvent:e})=>{const{offsetX:t,offsetY:a}=O(e);i.current.beginPath(),i.current.moveTo(t,a),s(!0)},finishDrawing:()=>{i.current.closePath(),s(!1),h([...b,o.length-1])},clearCanvas:()=>{const e=l.current,t=e.getContext("2d");t.fillStyle="white",t.fillRect(0,0,e.width,e.height),j([]),u([]),h([])},draw:({nativeEvent:e})=>{if(!r)return;const{offsetX:t,offsetY:a}=O(e);i.current.lineTo(t,a),i.current.stroke(),j([...o,t]),u([...d,a])}},children:e})},q=()=>Object(c.useContext)(A);a(170);function Q(){const{canvasRef:e,prepareCanvas:t,startDrawing:a,finishDrawing:r,draw:s}=q();return Object(c.useEffect)(t,[t]),Object(n.jsx)("canvas",{onMouseDown:a,onMouseUp:r,onMouseMove:s,onTouchStart:a,onTouchEnd:r,onTouchMove:s,ref:e})}a(111);function $(){const{user:e}=Object(c.useContext)(p),{x:t,y:a,stops:r}=q(),[s,l]=Object(c.useState)(!1);function i(){return(n=e.user.uid,b.collection("user-drawing").doc(n)).set({x:t,y:a,stops:r});var n}function o(){const[e,a]=Object(c.useState)(!1);Object(c.useEffect)((()=>{e&&i().then((()=>{a(!1),l(!0)}))}),[e]);return Object(n.jsx)(x.a,{disabled:e||s||0===t.length,className:"control-button",size:"lg",variant:"success",onClick:e?null:()=>{a(!0)},children:e?"\u041e\u0442\u043f\u0440\u0430\u0432\u043a\u0430...":s?"\u041e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e":"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0432 \u043f\u0435\u0447\u0430\u0442\u044c"})}return Object(c.useEffect)((()=>{l(!1)}),[t]),Object(n.jsx)(o,{})}function ee(){const{x:e,clearCanvas:t}=q();return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("div",{className:"controls-wrapper",children:Object(n.jsx)(Y.a,{fixed:"bottom",bg:"dark",className:"justify-content-center",children:Object(n.jsxs)(G.a,{children:[Object(n.jsx)(x.a,{onClick:t,disabled:0===e.length,className:"control-button",size:"lg",variant:"light",children:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"}),Object(n.jsx)($,{})]})})})})}var te=a(144);a(215);function ae(){return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("div",{children:Object(n.jsxs)(Y.a,{bg:"dark",variant:"dark",className:"justify-content-center",children:[Object(n.jsx)(Y.a.Brand,{href:"/",children:"Chocolate Fiesta Draw"}),Object(n.jsx)(Y.a.Collapse,{id:"basic-navbar-nav",children:Object(n.jsx)(G.a,{className:"ml-auto",children:Object(n.jsx)(G.a.Link,{href:"/draw-print",children:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043a \u043f\u0435\u0447\u0430\u0442\u0438"})})})]})})})}var ne=function(){return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("div",{className:"draw-app-wrapper",children:Object(n.jsx)(te.a,{...d,firebase:j.a,children:Object(n.jsxs)(Z,{children:[Object(n.jsx)(ae,{}),Object(n.jsx)(Q,{}),Object(n.jsx)(ee,{})]})})})})};function ce({updateSTL:e,setStlSettings:t}){const a=[{value:"Pacifico",title:"Pacifico"},{value:"Liberation Sans:style=Bold",title:"Sans Bold"},{value:"Liberation Serif:style=Bold",title:"Serif Bold"}];return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)(O.a,{children:[Object(n.jsxs)(O.a.Group,{as:v.a,children:[Object(n.jsx)(O.a.Label,{column:!0,children:"Text"}),Object(n.jsx)(C.a,{children:Object(n.jsx)(O.a.Control,{size:"sm",type:"text",defaultValue:"Chocolate Fiesta",onChange:e=>t({text:e.target.value})})})]}),Object(n.jsxs)(O.a.Group,{as:v.a,children:[Object(n.jsx)(O.a.Label,{column:!0,children:"Heigth, mm"}),Object(n.jsx)(C.a,{children:Object(n.jsx)(O.a.Control,{size:"sm",type:"number",step:"1",defaultValue:"5",onChange:e=>t({depth:e.target.value})})})]}),Object(n.jsxs)(O.a.Group,{as:v.a,children:[Object(n.jsx)(O.a.Label,{column:!0,children:"Width, mm"}),Object(n.jsx)(C.a,{children:Object(n.jsx)(O.a.Control,{size:"sm",type:"number",step:"1",defaultValue:"100",onChange:e=>t({width:e.target.value})})})]}),Object(n.jsxs)(O.a.Group,{as:v.a,children:[Object(n.jsx)(O.a.Label,{column:!0,children:"Heigth of foundation, mm"}),Object(n.jsx)(C.a,{children:Object(n.jsx)(O.a.Control,{size:"sm",type:"number",step:"10",defaultValue:"2",onChange:e=>t({foundation_depth:e.target.value})})})]}),Object(n.jsxs)(O.a.Group,{as:v.a,children:[Object(n.jsx)(O.a.Label,{column:!0,children:"Width of foundation, mm"}),Object(n.jsx)(C.a,{children:Object(n.jsx)(O.a.Control,{size:"sm",type:"number",step:"0.1",defaultValue:"2",onChange:e=>t({foundation_offset:e.target.value})})})]}),Object(n.jsxs)(O.a.Group,{as:v.a,children:[Object(n.jsx)(O.a.Label,{column:!0,children:"Word merger foundation width, mm"}),Object(n.jsx)(C.a,{children:Object(n.jsx)(O.a.Control,{size:"sm",type:"number",step:"1",defaultValue:"7",onChange:e=>t({foundation_joiner_height:e.target.value})})})]}),Object(n.jsxs)(O.a.Group,{as:v.a,children:[Object(n.jsx)(O.a.Label,{column:!0,children:"Letter spacing, mm"}),Object(n.jsx)(C.a,{children:Object(n.jsx)(O.a.Control,{size:"sm",type:"number",defaultValue:"1.0",onChange:e=>t({text_spacing:e.target.value})})})]}),Object(n.jsxs)(O.a.Group,{as:v.a,children:[Object(n.jsx)(O.a.Label,{column:!0,children:"Font"}),Object(n.jsx)(C.a,{children:Object(n.jsx)(O.a.Control,{size:"sm",as:"select",defaultValue:a[0].value,onChange:e=>t({font:e.target.value}),children:a.map((e=>Object(n.jsx)("option",{value:e.value,children:e.title})))})})]})]}),Object(n.jsx)(x.a,{onClick:()=>e(),children:"Generate"})]})}a(116);var re=a(138);function se(e){return Object(c.useEffect)((()=>{}),[e.stlUrl,e.fetchStlError]),e.fetchStlError?Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(k.a,{variant:"danger",children:"\u0412\u043e\u0437\u043d\u0438\u043a\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u0433\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u0438 \u043c\u043e\u0434\u0435\u043b\u0438, \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0441\u043d\u043e\u0432\u0430."})}):""===e.stlUrl?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(k.a,{variant:"primary",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u0433\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u044f \u043c\u043e\u0434\u0435\u043b\u0438. \u041f\u0440\u043e\u0446\u0435\u0441\u0441 \u043c\u043e\u0436\u0435\u0442 \u0437\u0430\u043d\u044f\u0442\u044c \u0434\u043e 1 \u043c\u0438\u043d\u0443\u0442\u044b."}),Object(n.jsx)(N.a,{animation:"border",role:"status",children:Object(n.jsx)("span",{className:"sr-only",children:"Loading..."})})]}):Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(re.ModelViewer,{width:"100%",aspectgRatio:"100%",rotationSpeeds:[0,0,0],initControlPosition:[0,0,.4],backgroundColor:"#ffffff",url:e.stlUrl})})}function le(e,t){return{...e,...t}}function ie(e,t={},a=3){return fetch(e,t).then((n=>{if(n.ok)return n.json();if(a>0)return ie(e,t,a-1);throw new Error(n)})).catch((n=>{if(a>0)return ie(e,t,a-1);throw new Error(n)}))}function oe(){const{user:e}=Object(c.useContext)(p),t=e.user.uid,[a,r]=Object(c.useState)(""),[s,l]=Object(c.useReducer)(le,{}),[i,o]=Object(c.useState)(!1);function j(e,t){return r(""),o(!1),ie(w+"/api/stl-generator/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((e=>{e?r(e.url):(o(!0),_.a(new Error(e)))})).catch((e=>{o(!0),_.a(new Error(e))}))}return Object(c.useEffect)((()=>{let e=!0;return j(0,{}).then((t=>{e&&null!=t&&r(t.url)})),()=>e=!1}),[t]),Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)(g.a,{fluid:"xl",className:"stl-generator-wrapper",children:[Object(n.jsxs)(v.a,{children:[Object(n.jsx)(C.a,{sm:7,children:Object(n.jsx)(se,{fetchStlError:i,stlUrl:a})}),Object(n.jsx)(C.a,{sm:5,children:Object(n.jsx)(ce,{updateSTL:function(){j(0,s)},setStlSettings:l})})]}),Object(n.jsx)(v.a,{children:Object(n.jsxs)(C.a,{children:[Object(n.jsx)(x.a,{as:"a",target:"_blank",href:a,className:"control-button",size:"lg",variant:"primary",download:!0,children:"Download STL"}),Object(n.jsx)(x.a,{disabled:!0,className:"control-button",size:"lg",variant:"primary",children:"Send to printer"})]})})]})})}var je=function(){const{user:e,setUser:t,removeUser:a}=function(){const[e,t]=Object(c.useState)((()=>{const e=localStorage.getItem("user");return e?JSON.parse(e):null})()),a=e=>{localStorage.setItem("user",JSON.stringify(e)),t(e)};return{setUser:a,user:e,removeUser:()=>{a(null)}}}();return e?Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(p.Provider,{value:{user:e,setUser:t,removeUser:a},children:Object(n.jsx)(i.a,{children:Object(n.jsxs)(o.c,{children:[Object(n.jsx)(o.a,{exact:!0,path:"/draw",children:Object(n.jsx)(ne,{})}),Object(n.jsxs)(o.a,{path:"/",children:[Object(n.jsx)(H,{}),Object(n.jsx)(o.a,{exact:!0,path:"/",children:Object(n.jsx)(M,{})}),Object(n.jsx)(o.a,{path:"/draw-print",children:Object(n.jsx)(M,{})}),Object(n.jsx)(o.a,{path:"/library",children:Object(n.jsx)(X,{})}),Object(n.jsx)(o.a,{path:"/slicer",children:Object(n.jsx)(K,{})}),Object(n.jsx)(o.a,{path:"/stl-generator",children:Object(n.jsx)(oe,{})})]})]})})})}):Object(n.jsx)(f,{setUser:t})};var de=e=>{e&&e instanceof Function&&a.e(3).then(a.bind(null,260)).then((({getCLS:t,getFID:a,getFCP:n,getLCP:c,getTTFB:r})=>{t(e),a(e),n(e),c(e),r(e)}))},ue=(a(246),a(256)),be=a(142);ue.a({dsn:"https://671da45dc307486090d441b0ff074028@o528559.ingest.sentry.io/5646853",integrations:[new be.a.BrowserTracing],tracesSampleRate:1}),l.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(je,{})}),document.getElementById("root")),de()}},[[247,1,2]]]);
//# sourceMappingURL=main.adf4501d.chunk.js.map